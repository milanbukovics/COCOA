{
  "cells": [
    {
      "cell_type": "markdown",
      "metadata": {},
      "source": [
        "---\n",
        "bibliography: partI.2.bib\n",
        "---\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "<div style=\"text-align: justify\">\n",
        "<!--\n"
      ],
      "id": "26a56f73"
    },
    {
      "cell_type": "code",
      "metadata": {},
      "source": [
        "#| echo: false\n",
        "import schemdraw\n",
        "import schemdraw.elements as elm\n",
        "with schemdraw.Drawing():\n",
        "    elm.Resistor()\n",
        "    elm.Capacitor()\n",
        "    elm.Diode()"
      ],
      "id": "ef4e9836",
      "execution_count": null,
      "outputs": []
    },
    {
      "cell_type": "markdown",
      "metadata": {},
      "source": [
        "-->\n",
        "\n",
        "\n",
        "\n",
        "# Introduction {#sec-introduction}\n",
        "\n",
        "With the development of the integrated circuit, the\n",
        "semiconductor industry is undoubtedly the most\n",
        "influential industry to appear in our society. Its\n",
        "impact on almost every person in the world exceeds\n",
        "that of any other industry since the beginning of the\n",
        "Industrial Revolution. The reasons for its success are\n",
        "as follows:\n",
        "\n",
        "\n",
        "::: {.callout-tip} \n",
        "\n",
        "## Chapter Objectives\n",
        "\n",
        "* Review the MOSFET device structure and basic\n",
        "operation as described by the square-law model.\n",
        "* Introduce large- and small-signal analysis \n",
        "techniques using the common-source voltage \n",
        "amplifier as a motivating example.\n",
        "* Derive a small-signal model for the MOSFET\n",
        "device, consisting of a transconductance and \n",
        "output resistance element.\n",
        "* Provide a feel for potential inaccuracies \n",
        "and range limitations of simple modeling expressions.\n",
        "\n",
        ":::\n",
        "\n",
        "## First-Order MOSFET Model\n",
        "\n",
        "The device-level derivations of this section assume\n",
        "familiarity with basic solid-state physics and electrostatics. \n",
        "For a ground-up treatment from first principles,\n",
        "the reader is referred to introductory \n",
        "solid-state device material (see Reference 1).\n",
        "\n",
        "### Derivation of I-V Characteristics\n",
        "\n",
        "The basic structure of an **enhancement mode \n",
        "n-channel** MOSFET is shown in @fig-2.1(a). \n",
        "It consists of a lightly doped p-substrate \n",
        "(**bulk**), two\n",
        "heavily doped n-type regions (**source** and \n",
        "**drain**) and\n",
        "a conductive gate electrode that is isolated \n",
        "from the\n",
        "substrate using a thin silicon dioxide layer \n",
        "of thickness $t_{ox}$. Other important geometry parameters of\n",
        "this device include the **channel length** $L$ (distance\n",
        "between the source and drain) and the **channel width** $W$.\n",
        "\n",
        "\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;As we shall see, the name “n-channel”\n",
        "stems from the fact that this device conducts current\n",
        "by forming an n-type layer underneath the gate. A\n",
        "**p-channel** device can be constructed similarly using\n",
        "an n-type bulk and p-type source/drain regions. The\n",
        "differentiating details between n- and p-channel\n",
        "devices are summarized in [Section 2-1-2](#p-channel-mosfet). For the\n",
        "time being, we will use the n-channel device to discuss the basic principles.\n",
        "\n",
        "![(a) Cross-section of an n-channel MOSFET.](images/png/figure2.1.png){#fig-2.1 width=100%}\n",
        "\n",
        "\n",
        "In order to study the electrical behavior of a\n",
        "MOSFET, it is useful to define a schematic symbol\n",
        "and conventions for electrical variables as shown in @fig-2.1(b) .\n",
        "The variables $V_{GS}$, $V_{DS}$, and $V_{BS}$ \n",
        "describe the voltages between the respective terminals \n",
        "using the commonly used ordered subscript convention \n",
        "$V_{XY}$ = $V_{X}$ – $V_{Y}$. The current flowing into the\n",
        "drain node is labeled $I_{D}$.\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;It is important to note that the MOSFET device\n",
        "considered here is perfectly symmetric; i.e., the drain\n",
        "and source terminal labels can be interchanged. It is\n",
        "a common convention to assign the source to the\n",
        "lower potential of these two terminals, since this \n",
        "terminal is the source of electrons that enable the flow\n",
        "of current. We will see later that this convention,\n",
        "together with the arrow that marks the source (and\n",
        "the direction of current flow), provides useful intuition\n",
        " when reading a larger circuit schematic.\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;We now begin our analysis of the MOSFET\n",
        "device by considering the condition shown in\n",
        "@fig-2.2(a), where the bulk and source are connected to a \n",
        "reference potential (GND), $V_{GS}$ = 0 $V$ and $V_{DS}$ = 0 $V$. \n",
        "Under this condition, the drain and\n",
        "source terminals are isolated by two reverse-biased\n",
        "pn-junctions and their **depletion regions**, which prevent any \n",
        "significant flow of current. Applying a positive\n",
        " voltage at the drain ($V_{DS}$ > 0 $V$) increases the\n",
        "reverse-bias at the drain-bulk junction and will only\n",
        "increase the width of the depletion region at the\n",
        "drain, while $I_{D}$ = 0 is still maintained (to first-order).\n",
        "\n",
        "\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;Consider now $V_{GS}$ = 0 as shown in @fig-2.2(b).\n",
        "This positive voltage at the gate attracts electrons from\n",
        "the source. With increasing $V_{GS}$, a larger amount of \n",
        "electrons is supplied by the source, and\n",
        "ultimately, a so-called **inversion layer** forms underneath \n",
        "the gate. The voltage $V_{GS}$ at which a significant\n",
        "number of mobile electrons underneath the gate become available \n",
        "is called the **threshold voltage** of\n",
        "the transistor, or $V_{t}$. In order to differentiate the\n",
        "threshold voltages and other device parameters of n-and \n",
        "p-channel devices, we will utilize the subscripts\n",
        "n and p throughout this module. E.g., we denote the\n",
        "threshold voltage for n-channels and p-channels as\n",
        "$V_{Tn}$ and $V_{Tp}$., respectively.\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "![(a) n-channel MOSFET with $V_{GS}$ = 0, (b)  $V_{GS}$ > $V_{Tn}$, ](images/png/figure2.2.png){#fig-2.2 width=70%}\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;With the inversion layer under the gate, \n",
        "the drain\n",
        "and source regions are now “connected” through a\n",
        "conductive path and any voltage between these terminals \n",
        "($V_{GS}$ > 0) will result in a flow of drain current.\n",
        "How can we calculate this current? In order to\n",
        "answer this question, the following approximations\n",
        "are useful:\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;**1.** The current primarily depends on the number of\n",
        "mobile electrons in the channel times their\n",
        "velocity.\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;**2.** The number of mobile electrons\n",
        "in the channel is set by the vertical electric field from the gate\n",
        "to the conductive channel (**gradual channel approximation**).\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;**3.** The threshold voltage is\n",
        "constant along the channel; this assumption neglects the so-called\n",
        "body effect.\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;**4.** The velocity of the electrons \n",
        "traveling from the source to the drain is proportional\n",
        " to the lateral electric field in the channel.\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;@fig-2.2(b) establishes relevant variables for\n",
        "further analysis. The auxiliary variable $y$ ranges from\n",
        "0 to $L$ and is used to express electrical quantities as a\n",
        "function of the distance from the source. The inversion \n",
        "layer charge density (per unit area) and voltage at position\n",
        "$y$ in the channel are denoted as $Q_{n}(y)$ and $V_{y}$,respectively.\n",
        "With these conventions in place,\n",
        "we can translate the above-listed assumptions into\n",
        "the following equations:\n",
        "\n",
        "\n",
        "$$\n",
        "I_D = - {W} \\cdot Q_n \\cdot v(y) \n",
        "$${#eq-2.1}\n",
        "\n",
        "$$\n",
        "Q_n(y) = -C_{ox} \\cdot (V_{GS}  -  V(y) - V_{Tn}) \n",
        "$${#eq-2.2}\n",
        "\n",
        "$$\n",
        "v(y) = -\\mu_n \\cdot E_y \n",
        "$${#eq-2.3}\n",
        "\n",
        "\n",
        "In these expressions, $v$ is the velocity of the carriers,\n",
        "$C_{ox}$ is the **gate capacitance** per unit area (between\n",
        "the gate electrode and the conductive channel). The\n",
        "term $\\mu_n$ is called **mobility**, and it relates the drift\n",
        "velocity of the carriers to the local electric field.\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;As indicated in @eq-2.2, the mobile charge density\n",
        " at coordinate $y$ depends on the local potential,\n",
        "since the voltage across the oxide is given by $V_{GS}$ –\n",
        "$V(y)$. An inversion layer is present at any location\n",
        "under the gate where this voltage difference is larger\n",
        "than the threshold ($V_{Tn}$). Assuming that the inversion\n",
        " layer extends from source to drain as drawn in\n",
        "@fig-2.2(b), we have $V(L)$ = $V_{DS}$ and $Q_{n}$$(L)$ =\n",
        "–$C_{ox}$ ($V_{GS}$ – $V_{Tn}$ – $V_{DS}$). This implies\n",
        "that $V_{DS}$ cannotexceed $V_{GS}$ – $V_{Tn}$ \n",
        "for an inversion layer that extends across the entire channel.\n",
        "For the time being, we will\n",
        "solve for the drain current for this condition and\n",
        "later extend the obtained result for the case of $V_{DS}$ =\n",
        "$V_{GS}$ – $V_{Tn}$.\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;Now, by combining @eq-2.1 through @eq-2.3 and\n",
        "noting that the electric field is given by $E(y)=-dV(y)/dy$ , we can write\n",
        "\n",
        "\n",
        "$$\n",
        "I_D(y) =  \\mu_n C_{ox} W \\cdot (V_{GS} - V_y - V_{Tn}) \\frac{dV_y}{dy}\n",
        "$${#eq-2.4}\n",
        "\n",
        "This result describes the current density profile\n",
        "along the channel. The terminal current, $I_{D}$, can be\n",
        "found by separating the variables and integrating\n",
        "along the direction of $y$\n",
        "\n",
        "$$\n",
        "\\int_0^L I_D(y) \\, dy = \\mu_n C_{ox} W \\int_0^{V_{DS}} (V_{GS} - V(y) - V_{Tn}) \\, dV \n",
        "$${#eq-2.5}\n",
        "\n",
        "\n",
        "which yields a closed-form solution for the drain current\n",
        "\n",
        "\n",
        "$$\n",
        "\\boxed{ I_D = \\mu_n C_{ox} \\frac{W}{L} \\left( V_{GS} - V_{Tn} - \\frac{V_{DS}}{2} \\right) V_{DS} }\n",
        "$${#eq-2.6}\n",
        "\n",
        "\n",
        "Note that this expression is valid for $V_{DS}$ < $V_{GS}$ – $V_{Tn}$, as assumed above.\n",
        "In order to extend the obtained result for $V_{DS}$ \n",
        "= $V_{GS}$ – $V_{Tn}$,\n",
        "we continue by inspecting the shape of the inversion layer \n",
        "for various $V_{DS}$ (see @fig-2.3). For $V_\n",
        "{DS}$ = 0 V [case (a)], no current flows and $V(y)$ = 0 for all \n",
        "$y$. Provided that $V_{GS}$ > $V_{Tn}$, \n",
        "a uniform inversion layer exists underneath the gate. For small \n",
        "$V_{DS}$ > 0, a current flows in the \n",
        "inversion layer, which causes increasing $V(y)$ and decreasing\n",
        "inversion layer charge along the channel. \n",
        "As $V_{DS}$ approaches $V_{GS}$ - $V_{Tn}$, $Q_{n}(L)$ approaches zero with a point of diminishing \n",
        "charge at the drain. This effect is called **pinch-off**.\n",
        "\n",
        "\n",
        "![Channel profile for varying $V_{DS}$.](images/png/figure2.3.png){#fig-2.3 width=100%}\n",
        "\n",
        "\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;What happens when we increase $V_{DS}$ beyond the point of pinch-off? Further analysis based on solving\n",
        "the two-dimensional **Poisson Equation** at the drain\n",
        "predicts that the pinch-off point will move from $L$ to\n",
        "$L – ΔL$, where $ΔL$ is small relative to $L$. Even though\n",
        "no inversion layer exists in the region from $L – ΔL$\n",
        "to $L$, the device still conducts current. The charges\n",
        "arriving at $y = L – ΔL$ are being swept to the drain by\n",
        "the electric field present in the depletion region of\n",
        "the surrounding pn junction.\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;To first-order, and neglecting the small\n",
        " change in channel length $ΔL$, the current becomes \n",
        "independent of $V_{DS}$ and is approximately given by the \n",
        "current at the onset of pinch-off, i.e., at $V_{DS}$ = $V_{GS}$ – $V_{Tn}$.\n",
        "Substituting this condition into @eq-2.6, we obtain\n",
        "\n",
        "\n",
        "$$\n",
        "\\boxed{I_D = \\frac{1}{2} \\mu_n C_{ox} \\frac{W}{L} ({V_{GS}} - V_{Tn})^2}\n",
        "$${#eq-2.7}\n",
        "\n",
        "for $V_{DS}$ ≥ $V_{GS}$ – $V_{Tn}$.\n",
        "\n",
        "@eq-2.6 and @eq-2.7 are plotted in @fig-2.4 as\n",
        "a function of $V_{DS}$ and some fixed $V_{GS}$ > $V_{Tn}$.\n",
        "The operating region for $V_{DS}$ < $V_{GS}$ – $V_{Tn}$ is commonly\n",
        "called the **triode region**. This name stems from the direct \n",
        "dependence of the drain current on the\n",
        "drain-source voltage, which is qualitatively similar to\n",
        "the behavior of vacuum tube “triodes.” The region\n",
        "$V_{DS}$ ≥ $V_{GS}$ – $V_{Tn}$ is called the **saturation region**\n",
        "due to the saturation in current at large $V_{DS}$. In this region,\n",
        "the device operates essentially like a current source; the current \n",
        "is (to first-order) independent of the applied $V_{DS}$ and\n",
        "$I_{D}$ = $I_{Dsat}$ = constant. The quantity \n",
        "$V_{GS}$ – $V_{Tn}$ is often called **gate overdrive**.\n",
        "\n",
        "![(a) n-channel I-V characteristic for a fixed value of $V_{GS}$ – $V_{Tn}$= 2V. (b) I-V plots with varying $V_{GS}$ – $V_{Tn}$ (drain characteristic). Parameters: $μCox$ = 50 $μA/V^2$ and $W/L = 10$.](images/png/figure2.4.png){#fig-2.4 width=100%}\n",
        "\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;The drain-source voltage at which the drain current saturates is called  $V_{DSat}$. From the above first-order analysis, it is clear that $V_{DSat}$ = $V_{GS}$ – $V_{Tn}$.\n",
        "Nonetheless, it is useful to distinguish between these\n",
        "two quantities, because they may differ significantly\n",
        "when a more elaborate device model is used. $V_{DSat}$\n",
        "is generally not exactly equal to $V_{GS}$ – $V_{Tn}$ when second-order effects, for example related to small\n",
        "geometries and modern device structures, are considered. \n",
        "\n",
        "&nbsp;&nbsp;&nbsp;From a circuit perspective, the device’s behavior in the triode region is similar to a resistor: the current increases monotonically with increasing terminal voltage. Even though the dependence of $I_{D}$ on\n",
        "$V_{DS}$ is nonlinear (as seen from @eq-2.6), it is \n",
        "sometimes useful to approximate the characteristic using\n",
        "a linear I-V law, shown as a dashed line in\n",
        "@fig-2.4(a). For $V_{DS}$ $\\ll$ $V_{GS}$ \n",
        "– $V_{Tn}$ , we can approximate @eq-2.6 as\n",
        "\n",
        "$$\n",
        "I_D \\equiv \\mu_n C_{ox} \\frac{W}{L} (V_{GS} - V_{Tn}) V_{DS} \n",
        "$${#eq-2.8}\n",
        "\n",
        "Under this approximation, $I_{D}$ depends linearly on\n",
        "$V_{DS}$, and we can define the so-called **on-resistance** of the device as\n",
        "\n",
        "$$\n",
        "R_{on} = \\frac{V_{DS}}{I_D} \\equiv \\frac{1}{\\mu_n C_{ox} \\frac{W}{L} (V_{GS} - V_{Tn})} \n",
        "$${#eq-2.9}\n",
        "\n",
        "\n",
        "It is interesting to interpret the dependencies in this\n",
        "expression using basic intuition. Increasing the aspect \n",
        "ratio $W /L$ decreases $R_{on}$ since the conductive\n",
        "path becomes shorter and/or wider; this is a basic\n",
        " property of any conductor. The on-resistance also\n",
        "decreases with increasing $C_{ox}$ and $V_{GS}$ – $V_{Tn}$; \n",
        "this is because the inversion charge increases with \n",
        "these quantities ($Q = CV$). Larger mobility ($μ_{n}$) means that\n",
        "the carriers travel faster for the same applied voltages\n",
        " (electric field). This increases the \n",
        "current\n",
        "(charge per unit of time) and therefore also results in\n",
        "smaller $R_{on}$.\n",
        "\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;As seen from @eq-2.7, \n",
        "the magnitude of the drain current in saturation depends on the square of\n",
        "the gate overdrive $V_{GS}$ – $V_{Tn}$. \n",
        "This is further illustrated in @fig-2.4(b),\n",
        "which shows I-V plots for increasing \n",
        "multiples of $V_{GS1}$ – $V_{Tn}$ = 1V. Doubling\n",
        "and tripling the gate overdrive increases the saturation \n",
        "current by factors of four and nine, respectively.\n",
        "Note that $R_{on}$ is reduced only by factors of two \n",
        "and three in these cases, respectively.\n",
        "\n",
        "The plot in @fig-2.4(b) is often called \n",
        "the **drain characteristic**, because the \n",
        "drain-source voltage (as\n",
        "opposed to the gate-source voltage, which is \n",
        "included as a parameter on the curves), is swept\n",
        "along the x-axis. Alternatively, the term \n",
        "**output characteristic** is sometimes used, \n",
        "primarily because $V_{DS}$ can often be viewed as the output port voltage of the\n",
        "device; we will see this in the example discussed in [Section 2-2](#building-a-common-source-voltage-amplifier).\n",
        "\n",
        "Another commonly used characterization plot for\n",
        "MOSFETs is the so-called **transfer characteristic**,\n",
        "which shows the drain current as a function of $V_{GS}$\n",
        "for a fixed value of $V_{DS}$. \n",
        "If $V_{DS}$ is chosen large\n",
        "enough such that the device operates in the\n",
        "saturation region for all applied $V_{GS}$, $I_{D}$ follows from @eq-2.7  and the plot is shaped \n",
        "like a parabola as drawn in @fig-2.5.\n",
        "\n",
        "![Plot of n-channel drain current as a function of $V_{GS}$ (transfer characteristic). Parameters: $V_{DS}$ = 5 V, $μC_{ox}$ = 50μA/$V^2$,$V_{Tn}$ = 0.5 V, and $W/L$ = 10.](images/png/figure2.5.png){#fig-2.5 width=100%}\n",
        "\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;@tbl-first-order-mosfet summarizes the first-order MOSFET I-V \n",
        "relationships that were discussed in this section. This set of \n",
        "equations (and extended versions thereof) is often called the \n",
        "**square-law model** since one of its primary features is the quadratic \n",
        "dependence of the saturation current on $V_{GS}$ – $V_{Tn}$. When \n",
        "working with this device model, it is important to remember that it\n",
        "predicts the behavior of real MOSFETs only with limited accuracy. This\n",
        "is primarily so because we have made several simplifications in the \n",
        "model’s derivation. The most significant shortcom ings that result from \n",
        "these assumptions can be summarized as follows:\n",
        "\n",
        "1. In reality, the saturation current has a weak\n",
        "dependence on $V_{DS}$. This is primarily due to a\n",
        "shortening of the channel length ($ΔL$) with\n",
        "increasing $V_{DS}$ and also due to the drain voltage\n",
        "dependence of the mobile charge in the channel.\n",
        "We will address this issue in [Section 2-2](#building-a-common-source-voltage-amplifier).\n",
        "\n",
        "2. For transistors built in modern technologies,\n",
        "several second-order effects related to small\n",
        "geometries and large electric fields become significant. This typically results in a saturation current law exponent that is less than two, and\n",
        "$V_{DSat}$ < $V_{GS}$ – $V_{Tn}$. In addition, the drain current\n",
        "does not scale strictly proportional to $1/L$ and\n",
        "the threshold voltage is not constant, but a function of the drain voltage.\n",
        "\n",
        "3. For $V_{GS}$ < $V_{Tn}$ the device is not completely off,\n",
        "but carries a small current that exponentially\n",
        "depends on $V_{GS}$. This operating region is called\n",
        "the **sub-threshold region**.\n",
        "\n",
        "4. For small values of $V_{GS}$ < $V_{Tn}$, on the order of a\n",
        "few tens of millivolts, the region underneath the\n",
        "gate is only moderately inverted, and the square\n",
        "law model tends to predict the drain current\n",
        "with poor accuracy.\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        ":::: {.table .striped .hover}\n",
        "Table: First-order MOSFET model summary {#tbl-first-order-mosfet}\n",
        "\n",
        "+:---------------------:+:----------------------------------------------------------------------------:+:------------------:+\n",
        "|                       |\"ON\"                                                                          |\"OFF\"               |\n",
        "|                       |                                                                              |                    |\n",
        "|                       |$V_{GS} ≥  V_{Tn}$                                                            | $V_{GS} < V_{Tn}$  |\n",
        "+:=====================:+:============================================================================:+:==================:+\n",
        "| $V_{DS} < V_{DSat}$   | $I_D = \\mu_n C_{ox} \\frac{W}{L} (V_{GS} - V_{Tn} - \\frac{V_{DS}}{2}) V_{DS}$ | $I_D = 0$          |\n",
        "+-----------------------+------------------------------------------------------------------------------+--------------------+\n",
        "| $V_{DS} \\geq V_{DSat}$| $I_D = \\frac{1}{2} \\mu_n C_{ox} \\frac{W}{L} (V_{GS} - V_{Tn})^2$             | $I_D = 0$          |\n",
        "+-----------------------+------------------------------------------------------------------------------+--------------------+\n",
        "\n",
        ":::: \n",
        "<!--: Table 2-1 : First-order MOSFET model summary {#Table1} {.striped .hover} -->\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;Despite these shortcomings,\n",
        "the first-order MOSFET model possesses many of the critical features \n",
        "needed to study the fundamentals of analog \n",
        "circuit design. Many of the second-order effects not featured in the basic model can \n",
        "be treated using advanced device physics and often result in a\n",
        "high-complexity model that is unsuitable for\n",
        "hand-calculations and intuition building.\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;Within the range of circuits \n",
        "treated in this mod ule, we typically begin by applying the first-order\n",
        "model. Then, only when the circuit appears to be\n",
        "sensitive to second-order dependencies not covered\n",
        "by this model, we will look for extensions. A treatment in this fashion has the advantage that the\n",
        "reader can develop a feel for where and\n",
        " when modeling extensions and parameter accuracy are critical.\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;In general, the tradeoff between modeling accuracy\n",
        "and complexity is a recurring theme at all levels\n",
        "of analog circuit design; the issue is not limited\n",
        " to the introductory material covered in this module. More\n",
        "accurate models can always be generated at the\n",
        "expense of complexity and time. An experienced\n",
        "analog designer will often use the simplest possible\n",
        "model that will predict the behavior of his or her circuit with sufficient (but not perfect) accuracy. This also implies that analog circuit designers must\n",
        "always be on the lookout for model inadequacies.\n",
        "We will encounter and discuss situations where\n",
        "either model expansions or critical insight on modeling accuracy are needed throughout this module.\n",
        "\n",
        "### P-Channel MOSFET\n",
        "\n",
        "The n-channel MOSFET discussed so far conducts\n",
        "current through an electron inversion layer in a\n",
        "p-type bulk. Similarly, we can construct a **p-channel**\n",
        "device that operates based on forming an inversion\n",
        "layer of holes in an n-type bulk. The structure of\n",
        "such a MOSFET, which consists of $p+$ source and\n",
        "drain regions in an n-type bulk, is shown in\n",
        "@fig-2.6. In many process technologies, the n-type\n",
        "bulk region is formed by creating an n-type well\n",
        "(**n-well**) in the p-type substrate that is used to form\n",
        "n-channels. Such a technology is called an **n-well technology**.\n",
        "In general, a technology that offers both\n",
        "n- and p-channel devices is called **CMOS** technology,\n",
        "where CMOS stands for Complementary\n",
        "Metal-Oxide-Semiconductor.\n",
        "\n",
        "\n",
        "![(a) Cross-section of a p-channel MOSFET. (b) Schematic symbol.)](images/png/figure2.6.png){#fig-2.6 width=100%}\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;The drain current equations for a p-channel\n",
        "MOSFET can be derived using exactly the same\n",
        "approach as used for the n-channel device since \n",
        "the basic physics are the same. For a p-channel device,\n",
        "the gate must be made negative with respect to the\n",
        "p-type source in order to form an inversion layer of\n",
        "holes; the threshold voltage $V_{Tp}$ is therefore typically\n",
        "negative. Since holes drift across the channel from\n",
        "the source to the drain in the p-channel MOSFET,\n",
        "the drain voltage must be negative with respect to\n",
        "the source, and the drain current (defined as flowing\n",
        "into the drain terminal) is negative. Therefore, in the\n",
        "on-state of the transistor, $V_{GS}$ and $V_{DS}$  are negative\n",
        "quantities, and the source lies at the highest potential\n",
        "among the four terminals. The drain current for\n",
        "a p-channel in saturation, i.e., $V_{GS}$ < $V_{DS}$ and $V_{DS}$ ≤ $V_{GS}$ – $V_{Tp}$, is given by\n",
        "\n",
        "$$\n",
        "{I_D = -\\frac{1}{2} \\mu_p C_{ox} \\frac{W}{L} ({V_{GS}} - V_{Tp})^2}\n",
        "$${#eq-2.10}\n",
        "\n",
        "A practical problem for the circuit designer is to\n",
        "keep track of the minus signs and negative quantities\n",
        "in the p-channel equations. A solution to this issue is\n",
        "to “think positive,” and work with the physically\n",
        "intuitive positive quantities $V_{SG}$ (instead of $V_{GS}$), $V_{SD}$ (instead of $V_{DS}$) in all hand calculations. Following this approach, we can rewrite @eq-2.10 as\n",
        "\n",
        "$$\n",
        "-{I_D = \\frac{1}{2} \\mu_p C_{ox} \\frac{W}{L} ({V_{GS}} - V_{Tp})^2}\n",
        "$${#eq-2.11}\n",
        "\n",
        "Note that the right-hand side of this equation yields\n",
        "a positive number. The minus sign included on the\n",
        "left-hand side remains necessary because $I_D$, as\n",
        "defined in @fig-2.6(b), is a negative quantity.\n",
        "\n",
        "### Standard Technology Parameters\n",
        "\n",
        "For use throughout this module, it is convenient to\n",
        "define standard MOSFET parameter values as given\n",
        "in @tbl-standard-technology-paramaters. The chosen values are representative of\n",
        "a CMOS technology with a minimum channel\n",
        "length, or **feature size** of 1 $\\mu$m. As we learn more\n",
        "about the behavior of MOSFETs in later sections,\n",
        "this list of parameters will grow and we will augment\n",
        "it as needed.\n",
        "\n",
        "\n",
        "&nbsp;&nbsp;&nbsp; In the context of defining these parameters, it is\n",
        "important to make a clear distinction between **technology parameters** and **design parameters**. Technology parameters are typically fixed in the sense that a\n",
        "circuit designer cannot alter their values. For\n",
        "instance, the mobility in a MOSFET depends on\n",
        "how the transistor is made, and the underlying recipe\n",
        "remains unchanged and will be reused for an\n",
        "extended time to manufacture a large variety and\n",
        "quantity of integrated circuits. In most modern\n",
        "CMOS technologies, the width and length of a MOSFET remain as the only parameters that the circuit\n",
        "designer can choose (within appropriate limits) to\n",
        "alter the device’s electrical behavior.\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;In determining the transistor geometries, the\n",
        "designer will usually work with electrical variables\n",
        "and parameters that describe the circuit and its\n",
        "functionality, for example in terms of currents\n",
        " and voltages. From these electrical descriptions and\n",
        "specifications, the widths and lengths of the\n",
        " transistors are then calculated, and sometimes adjusted via\n",
        "an iterative process. In this task, intermediate \n",
        "electrical parameters, as for instance the gate overdrive\n",
        "of a MOSFET, are also legitimately viewed as\n",
        "parameters that are under the control of the circuit\n",
        "designer.\n",
        "\n",
        "\n",
        "**[Example 2-1]{#example-2-1}: P-Channel Drain Current Caculation**\n",
        "\n",
        "A p-channel transistor is operated with the following\n",
        "terminal voltages relative to ground: $V_{G}$ = 2.5 $V$, $V_{S}$ = $V_{B}$ = 5 $V$, $V_{D}$ = 1\n",
        "$V$. Calculate the drain current $I_D$\n",
        "using the standard technology parameters given in\n",
        "@tbl-standard-technology-paramaters and assuming $W/L = 5$.\n",
        "\n",
        "**SOLUTION**\n",
        "\n",
        "From the given terminal voltages, we find $V_{SG}$ = 5 $V$– 2.5 $V$ = 2.5 $V$ and $V_{SD}$ = 5 $V$\n",
        " – 1 $V$ = 4 $V$. Since $V_{SG}$ > $V_{Tp}$, the transistor is on, and \n",
        " since $V_{SD}$ > $V_{SG}$ + $V_{Tp}$\n",
        "= 2.5 $V$ – 0.5 $V$ = 2 $V$, it operates in saturation. Therefore, using @eq-2.11 we find\n",
        "\n",
        "<!-- FIXME typo for mu_n , changed it to mu_p -->\n",
        "$$\n",
        "-{I_D = \\frac{1}{2} \\mu_p C_{ox} \\frac{W}{L} ({V_{GS}} - V_{Tp})^2}\n",
        "$$\n",
        "$$\n",
        "-{I_D = \\frac{1}{2} \\cdot 25\\frac{μA}{V^2} \\cdot 5 \\cdot (2.5 V - 0.5V)^2 = 250μA}\n",
        "$$\n",
        "\n",
        "$$\n",
        "-I_D = -250μA\n",
        "$$\n",
        "\n",
        "\n",
        "\n",
        ":::: {.table .striped .hover}\n",
        "Table: Standard technology parameters for the first-order\n",
        "MOSFET model {#tbl-standard-technology-paramaters}\n",
        "\n",
        "\n",
        "+-----------------------+:--------------------:+:-------------------:+\n",
        "| **Parameter**         | **n-channel MOSFET** | **p-channel MOSFET**|\n",
        "+=======================+:====================:+:===================:+\n",
        "| Threshold voltage     | $V_{Tn}$ = 0.5V      | $V_{Tp}$ = -0.5V    |\n",
        "+-----------------------+----------------------+---------------------+\n",
        "| Transconductance      | $μ_nC_{ox}= 50μA/V^2$|$μ_pC_{ox}= 25μA/V^2$|\n",
        "|    parameter          |                      |                     |\n",
        "+-----------------------+----------------------+---------------------+\n",
        "\n",
        "::::\n",
        "<!--: **Table 2-2**: Standard technology parameters for the first-order\n",
        "MOSFET model. -->\n",
        "\n",
        "## Building a Common-Source Voltage Amplifier \n",
        "\n",
        "We will now utilize our first-order understanding of\n",
        "MOSFETs to construct a basic voltage amplifier. We\n",
        "begin by noting that the drain current in all regions\n",
        "of operation can be controlled by varying the\n",
        "gate-source voltage. One way to utilize this effect to\n",
        "build a voltage amplifier is to apply the input such\n",
        "that it controls $V_{GS}$. An output voltage can then be\n",
        "generated by letting the drain current flow through a\n",
        "resistor, as shown in @fig-2.7(a). The top terminal\n",
        "of the resistor is connected to a **supply voltage**, $V_{DD}$.\n",
        "In this scheme, a larger $V_{IN}$ causes the drain current\n",
        "to increase and $V_{OUT}$ to decrease, since a larger $V_{IN}$\n",
        "makes the transistor a “better conductor” (more\n",
        "inversion charge), which forces the voltage at the\n",
        "output port closer to ground. This type of circuit is\n",
        "therefore categorized as an **inverting amplifier**. Furthermore,\n",
        " this transistor stage is called a **common-source amplifier**, since the source terminal of\n",
        "the MOSFET is common to the input and output\n",
        "ports of the circuit.\n",
        "\n",
        "\n",
        "![(a) Basic common-source amplifier schematic. (b) Voltage transfer characteristic for $V_{DD}$ = 5 $V$, $R_D$ = 5 $kΩ$, and $W/L$ = 20.](images/png/figure2.7.png){#fig-2.7 width=100%}\n",
        "\n",
        "\n",
        "### Voltage Transfer Characteristic\n",
        "\n",
        "In order to derive the voltage transfer characteristic\n",
        "of the circuit ($V_{OUT}$ as a function of $V_{IN}$) we begin by\n",
        "applying Kirchhoff’s laws at the output node. This\n",
        "yields\n",
        "\n",
        "$$\n",
        "V_{OUT} = V_{DD} - I_D R_D\n",
        "$${#eq-2.12}\n",
        "\n",
        "The drain current ID in this expression depends on\n",
        "$V_{GS}$ and $V_{DS}$ of the transistor, as described in\n",
        "@tbl-first-order-mosfet. Given the structure of the circuit in\n",
        "@fig-2.7(a), we note that $V_{GS}$ = $V_{IN}$ and $V_{DS}$ =\n",
        "$V_{OUT}$. Using this information, we can construct a\n",
        "piecewise function that relates the input and output\n",
        "voltages of the circuit. For this derivation, imagine\n",
        "that we sweep $V_{IN}$ from 0 $V$ to the supply voltage,\n",
        "$V_{DD}$.\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;First, we note that for $V_{IN}$ = $V_{GS}$ < $V_{Tn}$, no current\n",
        "flows in the transistor; this implies $V_{OUT}$ = $V_{DD}$. This\n",
        "behavior is shown in @fig-2.7(b) as a horizontal\n",
        "line for the input voltage range 0 ≤ $V_{IN}$ < $V_{Tn}$,\n",
        "between points A and the vertical line at $V_{Tn}$. As $V_{IN}$\n",
        "increases to values greater than or equal to $V_{Tn}$, the\n",
        "transistor conducts current, and $V_{OUT}$ must be less\n",
        "than $V_{DD}$. In order to calculate how $V_{OUT}$ changes as\n",
        "a function of $V_{IN}$, we must first determine the transistor’s\n",
        " region of operation. As we increase $V_{IN}$\n",
        "above $V_{Tn}$, does the MOSFET operate in saturation\n",
        "or in the triode region?\n",
        "\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;To answer this question, we must determine if\n",
        "$V_{DS}$ is smaller or larger than $V_{GS}$ - $V_{Tn}$. For $V_{IN}$ just\n",
        "above $V_{Tn}$,  $V_{GS}$ – $V_{Tn}$ is smaller than  $V_{DS}$, which is\n",
        "still close to  $V_{DD}$ at the onset of current conduction.\n",
        "Therefore, the device must initially operate in\n",
        "saturation as we transition from the “OFF” state of the\n",
        "transistor into the region where $I_D$ > 0. Under this\n",
        "condition, the output voltage is given by \n",
        "\n",
        "$$\n",
        "V_{OUT}=V_{DD} - R_D \\cdot \\frac{1}{2} \\mu_n C_{ox} \\frac{W}{L}(V_{IN}-V_{Tn})^2\n",
        "$${#eq-2.13}\n",
        "\n",
        "and the voltage transfer characteristic shows a drop\n",
        "that is quadratic in $V_{IN}$ as seen in @fig-2.7(b).\n",
        "\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;As we continue to increase $V_{IN}$, $V_{GS}$ - $V_{Tn}$ also\n",
        "increases while $V_{OUT}$ continues to decrease. At a sufficiently\n",
        "large $V_{IN}$, $V_{DS}$ can approach $V_{GS}$ - $V_{Tn}$ and\n",
        "the condition for current saturation may no longer\n",
        "hold; the device then transitions into the triode\n",
        "region. The input voltage at which this transition\n",
        "occurs (point $C$ in @fig-2.7(b)) can be computed by\n",
        "setting the right-hand side of @eq-2.13 equal to $V_{IN}$\n",
        "– $V_{Tn}$, and solving for $V_{IN}$. It is interesting to note\n",
        "that graphically, point $C$ can be found through the\n",
        "intersection of the voltage transfer characteristic\n",
        "with the line $V_{IN}$ – $V_{Tn}$. The intersect corresponds to\n",
        "the point where $V_{OUT}$ = $V_{DS}$ = $V_{IN}$ – $V_{Tn}$ = $V_{GS}$ - $V_{Tn}$,\n",
        "i.e., the transition point between saturation and triode for the MOSFET.\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;For the region where the MOSFET operates in\n",
        "the triode region, we have \n",
        "\n",
        "$$\n",
        "V_{OUT} = V_{DD}-R_D \\cdot \\mu_n C_{ox}\\frac{W}{L}(V_{IN}-V_{Tn}-\\frac{V_{OUT}}{2})V_{OUT}\n",
        "$${#eq-2.14}\n",
        "\n",
        "Unfortunately, solving this expression for $V_{OUT}$\n",
        "yields an unwieldy square-root expression that is\n",
        "best analyzed graphically. As we can see from the\n",
        "plot in @fig-2.7(b), the most important feature\n",
        "here is that the slope of the voltage transfer \n",
        "characteristic diminishes for large $V_{IN}$; i.e., the slope of the\n",
        "curve at point $D$ is smaller than the slope at point $C$.\n",
        "Qualitatively, this can be explained by viewing the\n",
        "MOSFET as a resistor, whose value continues to\n",
        "decrease with $V_{IN}$. For very large $V_{IN}$, the output\n",
        "voltage must asymptotically approach 0 V. This can\n",
        "be shown by approximating the MOSFET by its\n",
        "on-resistance for small $V_{DS}$ as given by @eq-2.9. The\n",
        "output voltage in the vicinity of point $D$ can then be\n",
        "expressed by considering the resistive voltage\n",
        "divider formed by $R_{D}$ and $R_{on}$.\n",
        "\n",
        "$$\n",
        "V_{OUT}≅\\frac{V_{DD} \\cdot R_{on}}{R_D + R_{on}} = \\frac{V_{DD}}{1+R_D\\cdot\\mu_n C_{ox}\\frac{W}{L}(V_{IN}-V_{Tn})}\n",
        "$${#eq-2.15}\n",
        "\n",
        "This result confirms that for large input voltages,\n",
        "$V_{OUT}$ will asymptotically approach zero.\n",
        "\n",
        "\n",
        "**[Example 2-2]{#example-2-2}: Voltage Transfer Calculations for a Common-Source Amplifier**\n",
        "\n",
        "Consider the circuit of @fig-2.7(a) with the following\n",
        "parameters: $V_{DD}$ = 5 $V$, $R_D$ = 10 $kΩ$.\n",
        "\n",
        "a.  Using the standard technology parameters of\n",
        "@tbl-standard-technology-paramaters, calculate the required aspect ratio\n",
        "$W/L$ such that $V_{OUT}$ = 2.5 $V$ for $V_{IN}$ = 1 $V$.\n",
        "\n",
        "b. Assuming $W/L$ =10, calculate the input voltage\n",
        "$V_{IN}$ that yields $V_{OUT}$ = 2.5 $V$.\n",
        "\n",
        "\n",
        "\n",
        "**SOLUTION**\n",
        "\n",
        "a. As a first step, we can calculate the drain current\n",
        "that results in $V_{OUT}$ = 2.5 $V$ using @eq-2.12.\n",
        "\n",
        "$$\n",
        "V_{OUT} = V_{DD}-I_D R_D\n",
        "$$\n",
        "$$\n",
        "2.5V = 5V - (I_D\\cdot 10kΩ )\n",
        "$$\n",
        "$$\n",
        "I_D= 250µA\n",
        "$$\n",
        "\n",
        "Since $V_{GS}$ – $V_{Tn}$ = 0.5 V < $V_{DS}$ = 2.5 V, we\n",
        "know that the device must operate in the saturation\n",
        "region. Therefore,\n",
        "\n",
        "$$\n",
        "I_D = \\frac{1}{2} \\mu_n C_{ox} \\frac{W}{L} ({V_{GS}} - V_\n",
        "{Tn})^2\n",
        "$$\n",
        "$$\n",
        "250µA= \\frac{1}{2}\\cdot 50\\frac{µA}{V^2}\\cdot\\frac{W}{L}\n",
        "\\cdot(1V-0.5V)^2\n",
        "$$\n",
        "\n",
        "and solving for the aspect ratio yields $W/L = 40$.\n",
        "Note that this answer can also be found by\n",
        "direct evaluation of @eq-2.13, without computing $I_D$ initially.\n",
        "\n",
        "\n",
        "\n",
        "b. since $V_{IN}$ is unknown in this part of the problem, \n",
        "we cannot immediately determine the\n",
        "operating region of the MOSFET. In such a situation, \n",
        "it is necessary to guess the operating\n",
        "region, and later test whether the guess was correct. \n",
        "Let us begin by assuming that the device\n",
        "operates in saturation. We can then write\n",
        "\n",
        "$$\n",
        "I_D = \\frac{1}{2} \\mu_n C_{ox} \\frac{W}{L} ({V_{GS}} - V_{Tn})^2\n",
        "$$\n",
        "$$\n",
        "250µA= \\frac{1}{2}\\cdot 50\\frac{µA}{V^2}\\cdot 10 \\cdot(V_{GS}-0.5V)^2\n",
        "$$\n",
        "\n",
        "The two solutions to this equation are $V_{GS1}$ =\n",
        "1.5 $V$, and $V_{GS2}$ = –0.5 $V$. Since we know that\n",
        "the device is off for $V_{GS}$ < $V_{Tn}$, it is clear that\n",
        "$V_{GS2}$ is a non-physical solution that must be \n",
        "discarded. For the obtained $V_{GS1}$, we must now\n",
        "verify that the device operates in saturation, as\n",
        "initially assumed. It is straightforward to see\n",
        "that this is indeed the case since $V_{GS1}$ – $V_{Tn}$ = 1\n",
        "$V$< $V_{DS}$ = 2.5 $V$. Therefore, the final answer to\n",
        "this problem is $V_{IN}$ = 1.5 V.\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;If we had initially guessed that the device\n",
        "operates in the triode region, we would write\n",
        "\n",
        "$$\n",
        "I_D=\\mu_n C_{ox}\\frac{W}{L}(V_{GS}-V_{Tn}-\\frac{V_{DS}}{2})V_{DS}\n",
        "$$\n",
        "$$\n",
        "250µA = 50\\frac{µA}{V^2}\\cdot 10 \\cdot (V_{GS} - 0.5V - \\frac{2.5V}{2})\\cdot 2.5V\n",
        "$$\n",
        "\n",
        "- The two solution to this equation is $V_{GS}$ = 1.95 $V$.\n",
        "Since $V_{GS}$ – $V_{Tn}$ = 1.45 $V$ < $V_{DS}$ = 2.5, we see that\n",
        "the obtained result contradicts the assumed\n",
        "operation in triode. Therefore, the next logical\n",
        "step would be to evaluate the saturation equation,\n",
        "as already done above.\n",
        "\n",
        "###  Load Line Analysis\n",
        "\n",
        "A generally useful tool for graphical analysis in\n",
        "electronic circuits is the so-called **load line analysis**. The\n",
        "basis for such an analysis in the context of our circuit\n",
        "is the fact that the current flowing through the\n",
        "transistor ($I_D$) is equal to the current flowing through the\n",
        "resistor (which is viewed in this context as the load of\n",
        "the circuit). Therefore, if we draw the I-V characteristics\n",
        "of the MOSFET and $R_D$ in one diagram, valid\n",
        "output voltages lie at the intersection of the two\n",
        "curves (equal current). This is further illustrated in\n",
        "@fig-2.8. The load line equation in this plot follows\n",
        "from solving @eq-2.12 for $I_D$ and is given by \n",
        "\n",
        "$$\n",
        "I_D= \\frac{V_{DD} - V_{OUT}}{R_D}\n",
        "$${#eq-2.16}\n",
        "\n",
        "![Load line plot for the CS amplifier in @fig-2.7(a). Parameters: $V_{DD}$ = 5 V, $R_D$ = 5 kΩ, and $W/L = 20$.](images/png/figure2.8.png){#fig-2.8 width=100%}\n",
        "\n",
        "The points A, B, C, and D marked in @fig-2.8 correspond\n",
        " to the points shown with the same annotation\n",
        "in @fig-2.7(b). Since the transistor drain\n",
        "characteristics are overlaid in @fig-2.8, it is easy to\n",
        "identify the operating regions that correspond to\n",
        "each point. For example, we can immediately see\n",
        "that point B lies in saturation, since the intersect\n",
        "occurs in a region of constant drain current.\n",
        "\n",
        "**Example 2-3: Output Voltage Calculations for a Common-Source Voltage Amplifier**\n",
        "\n",
        "Construct a load line plot to verify the solution of\n",
        "[Example 2-2](#example-2-2)(b) using $V_{DD}$ = 5 $V$, \n",
        "$R_D$ = 10 kΩ , and\n",
        "W/L =10. Use $V_{IN}$ = $V_{GS}$ = 1 $V$, 1.5 $V$, and 2 $V$ \n",
        "for the\n",
        "drain characteristic plot.\n",
        "\n",
        "**SOLUTION**\n",
        "\n",
        "\n",
        "The solution is shown in @fig-ex-2.3. The load line\n",
        "is most easily drawn by connecting the points (0,\n",
        "$V_{DD}$/$R_D$ = 0.5 $mA$) and ($V_{DD}$ = 5 $V$, 0). The drain\n",
        "characteristics are drawn for the three given $V_{GS}$\n",
        "using the expressions of @tbl-first-order-mosfet, by \n",
        "sweeping $V_{DS}$ = $V_{OUT}$ from 0 $V$ to 5 $V$. The \n",
        "intersect of the load  line  with the drain characteristic for $V_{IN}$ = 1.5 $V$ \n",
        "confirms the result already obtained in [Example 2-2](#example-2-2)(b).\n",
        "\n",
        "![](images/png/figure-ex-2.3.png){#fig-ex-2.3 width=1000%}\n",
        "\n",
        "### Biasing\n",
        "\n",
        "After deriving the voltage transfer characteristic of\n",
        "our amplifier, we are now in a position to evaluate\n",
        "this circuit from an application standpoint. As we\n",
        "have discussed in [Chapter 1](#Chapter 1), a common objective for\n",
        "a voltage amplifier is to create large output voltage\n",
        "excursions from small changes in the applied input\n",
        "voltage. With this objective in mind, it becomes clear\n",
        "that only a limited range of the transfer characteristic\n",
        "in @fig-2.7(b) is useful for amplification. For\n",
        "example, a change in the input voltage applied\n",
        "around point D in @fig-2.7(b) yields almost no\n",
        "change in the output voltage. In order to amplify\n",
        "small changes in $V_{IN}$ into large changes in $V_{OUT}$, the\n",
        "transistor should be operated in the saturation\n",
        "region, i.e., in the vicinity of point B. The general\n",
        "concept of operating a circuit and its constituent\n",
        "transistor(s) around a useful operating point is called\n",
        "**biasing**.\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;Biasing generally necessitates the introduction of\n",
        "auxiliary voltages and/or currents that bring the \n",
        "circuit into the desired state. For the circuit considered\n",
        "in this section, proper biasing can be achieved by\n",
        "decomposing the input voltage into a constant \n",
        "component, and a component that represents the \n",
        "incremental voltage change to be amplified; this is\n",
        "illustrated in @fig-2.9(a). The incremental voltage\n",
        "component $v_{in}$ could represent, for instance, the \n",
        "signal generated by a microphone or a similar \n",
        "transducer. The voltage $V_{IN}$ is a constant voltage that\n",
        "defines the point on the overall transfer characteristic\n",
        "around which the incremental $v_{in}$ is applied. We\n",
        "call $V_{IN}$ the **input bias voltage** of the circuit.\n",
        "\n",
        "![(a) CS amplifier with input bias.(b) Transfer characteristic showing the bias point.](images/png/figure2.9.png){#fig-2.9 width=100%}\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;Per IEEE convention, the total quantity in such a\n",
        "decomposition is denoted using a lowercase symbol\n",
        "and uppercase subscript, i.e., $v_{IN}$ = $V_{IN}$ + $v_{in}$ in our\n",
        "example. Similarly, the drain current is decomposed\n",
        "as $i_{d}$ = $I_{D}$ + $i_{d}$, where $I_{D}$ is the current at the operating\n",
        "point, and id captures the current deviations due to\n",
        "the applied signal.\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;@fig-2.9(b) elucidates this setup further using\n",
        "the circuit’s transfer characteristic. With $v_{in}$ = 0, the\n",
        "output is equal to $V_{OUT}$, which is called the bias point\n",
        "or operating point of the output node. The bias point\n",
        "is sometimes also called the quiescent point (Q),\n",
        "since the corresponding voltage level corresponds to\n",
        "that of a “quiet” input. Note that $V_{OUT}$ can be \n",
        "calculated by evaluating @eq-2.13, as done previously.\n",
        "\n",
        "With some nonzero $v_{in}$ applied, the output will\n",
        "now see an excursion away from the bias point. For\n",
        "example, applying a positive $v_{in}$ will result in a negative\n",
        "incremental change $v_{out}$ at the output. How can\n",
        "we compute $v_{out}$ for a given $v_{in}$? Since @eq-2.13\n",
        "must hold for the total quantities $v_{IN}$ = $V_{IN}$ + $v_{in}$ and\n",
        "$v_{OUT}$ = $V_{OUT}$ + $v_{out}$ we can write\n",
        "\n",
        "$$\n",
        "V_{OUT}= V_{DD}-R_D\\cdot \\frac{1}{2}\\mu_n C_{ox}\\frac{W}{L}(v_{IN}-V_{Tn})^2\n",
        "$${#eq-2.17}\n",
        "\n",
        "or \n",
        "\n",
        "$$\n",
        "V_{OUT} + v_{out} = V_{DD}-R_D\\cdot \\frac{1}{2}\\mu_n C_{ox}\\frac{W}{L}(V_{IN} + v_{in} -V_{Tn})^2\n",
        "$${#eq-2.18}\n",
        "\n",
        "In order to simplify this expression, and since we are\n",
        "only interested in the change of $v_{out}$ as a function of\n",
        "$v_{in}$, it is useful to eliminate the constant term from\n",
        "this expression, given by\n",
        "\n",
        "$$\n",
        "V_{OUT}= V_{DD}-R_D\\cdot \\frac{1}{2}\\mu_n C_{ox}\\frac{W}{L}(V_{IN}-V_{Tn})^2\n",
        "$${#eq-2.19}\n",
        "\n",
        "\n",
        "After subtracting @eq-2.19 from @eq-2.18 and\n",
        "rearranging the terms, we obtain\n",
        "\n",
        "$$\n",
        "v_{out} = -R_D \\mu_n C_{ox} \\frac{W}{L}(V_{IN} - V_{Tn}) \\cdot v_{in} [ 1+ \\frac{v_{in}}{2(V_{IN} - V_{TN})}]\n",
        "$${#eq-2.20}\n",
        "\n",
        "Using the drain current expression of @eq-2.7, and\n",
        "by defining\n",
        "\n",
        "$$\n",
        "V_{OV} = (V_{GS} - V_{Tn})|_{Q} = V_{IN} - V_{Tn}\n",
        "$${#eq-2.21}\n",
        "\n",
        "the result can be further simplified and rewritten as\n",
        "\n",
        "$$\n",
        "v_{out} = -\\frac{2I_D}{V_{OV}}\\cdot R_D \\cdot v_{in}(1+\\frac{v_{in}}{2V_{OV}})\n",
        "$${#eq-2.22}\n",
        "\n",
        "where $I_D$ is the transistor’s drain current at the bias\n",
        "point, and $V_{OV}$ is introduced as a symbol for the \n",
        "quiescent point gate overdrive voltage.\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;From the end result in @eq-2.22, we see that $v_{out}$\n",
        "is a nonlinear function of $v_{in}$. This is not surprising,\n",
        "since we are employing a transistor that exhibits a\n",
        "nonlinear I-V characteristic. While this derivation\n",
        "was relatively simple, the analysis of nonlinear circuits \n",
        "in general tends to be complex. Picture a circuit\n",
        "that contains several transistors, as for instance a\n",
        "cascade connection of several stages of the amplifier\n",
        "circuit considered here. Even with only a few nonlinear\n",
        " elements, most cases involving practical circuits\n",
        "with just moderate complexity tends to yield\n",
        "unwieldy expressions. A widely used solution to this\n",
        "problem is to approximate the circuit behavior using\n",
        "a linear model around its operating point, which we\n",
        "will discuss next.\n",
        "\n",
        "### The Small-Signal Approximation\n",
        "@eq-2.22 is written in a format that suggests\n",
        "an opportunity for simplification. Provided that \n",
        "$v_{in}$ $\\ll$ $v_{OV}$, the bracketed term is \n",
        "close to unity and we can write\n",
        "\n",
        "$$\n",
        "v_{out} = -\\frac{2I_D}{V_{OV}}\\cdot R_D \\cdot v_{in} = A_v \\cdot v_{in}\n",
        "$${#eq-2.23}\n",
        "where $A_v$ is a constant voltage gain term that relates\n",
        "the incremental input and output voltages.\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;Interestingly, the term Av can also be found using\n",
        "basic calculus. Assuming that the incremental voltages\n",
        "represent infinitesimally small deviations in the\n",
        "total signal, we can rewrite @eq-2.23 as\n",
        "\n",
        "$$\n",
        "dv_{OUT} = A_v \\cdot dv_{IN}\n",
        "$${#eq-2.24}\n",
        "\n",
        "and therefore\n",
        "\n",
        "$$\n",
        "A_v= \\left. \\frac{dv_{OUT}}{dv_{IN}} \\right|_Q = \\left. \\frac{dv_{OUT}}{dv_{IN}} \\right|_{v_{IN}=v_{IN}}\n",
        "$${#eq-2.25}\n",
        "\n",
        "where the derivative is evaluated at the circuit’s\n",
        "operating point $Q$ that is fully defined by choice of\n",
        "the input bias voltage $V_{IN}$. By applying @eq-2.25 to\n",
        "@eq-2.17, we find\n",
        "\n",
        "\n",
        "$$\n",
        "A_v = \\frac{d}{dv_{IN}} \\left[ V_{DD} - R_D - \\frac{1}{2} \\mu_n C_{ox} \\frac{W}{L} (v_{IN} - V_{Tn})^2 \\right] \\bigg|_{v_{IN} = v_{IN}}\n",
        "$$\n",
        "\n",
        "$$\n",
        "= -R_D \\mu_n C_{ox} \\frac{W}{L} (v_{IN} - V_{Tn}) \\bigg|_{v_{IN} = v_{IN}} \n",
        "$${#eq-2.26}\n",
        "\n",
        "$$\n",
        "= -R_D \\mu_n C_{ox} \\frac{W}{L} (V_{IN} - V_{Tn}) = -R_D \\mu_n C_{ox} \\frac{W}{L} V_{OV}\n",
        "$$\n",
        "\n",
        "Finally, using @eq-2.7, we find\n",
        "\n",
        "$$\n",
        "A_v = -\\frac{2I_D}{V_{OV}}\\cdot R_D\n",
        "$${#eq-2.27}\n",
        "\n",
        "which is the same result obtained previously. The\n",
        "voltage gain $A_v$ can be interpreted graphically as\n",
        "shown in @fig-2.10. From @eq-2.25 and basic calculus\n",
        "we know that $A_v$ is the slope of the tangent to\n",
        "the transfer characteristic at the point ($V_{IN}$, $V_{OUT}$),\n",
        "which is the operating point of the circuit.\n",
        "\n",
        "![Concept of small-signal voltage gain. In the small signal model, the input and output voltages are linearly related through $A_v$, the slope of the tangent at the operating point of the large-signal transfer characteristic.](images/png/figure2.10.png){#fig-2.10 width=100%}\n",
        "\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;In analog circuit nomenclature, $A_v$ is called the\n",
        "**small-signal voltage gain** of the circuit; this emphasizes\n",
        "that this quantity is only suitable for calculations\n",
        "with “small” signals such that nonlinear effects\n",
        "are negligible. In the particular circuit considered\n",
        "here, “small” means $v_in$ $\\ll$ $V_{OV}$, as seen from our\n",
        "analysis. The general concept of approximating circuit\n",
        "behavior by assuming small-signal excursions\n",
        "around an operating point is called **small-signal\n",
        "approximation**. In order to clearly distinguish a circuit\n",
        "transfer characteristic obtained through such an\n",
        "approximation from one that incorporates the nonlinear\n",
        "transistor behavior (e.g., @eq-2.17), the term\n",
        "**large-signal transfer characteristic** is typically used\n",
        "for the latter.\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;As we shall see in the remainder of this module,\n",
        "working with small-signal approximations greatly\n",
        "simplifies analog circuit analysis and design. The\n",
        "price paid for the approximation, however, is that\n",
        "the resulting equations by themselves cannot be\n",
        "used to reason about the circuit’s behavior for large\n",
        "signals, as for instance signals where $v_{in}$ is comparable\n",
        "to, or even greater than, $V_{OV}$. As illustrated in\n",
        "@fig-2.10, the small-signal approximation essentially\n",
        "creates a new coordinate system that linearly\n",
        "relates the input and output voltages. In this model,\n",
        "the output voltage follows the input linearly, no matter\n",
        "how large the applied voltage is. In reality, considering\n",
        "the circuit’s large signal transfer\n",
        "characteristic, signal clipping and strong waveform\n",
        "distortion can occur for large excursions and poorly\n",
        "chosen bias points. Examples of such cases are illustrated\n",
        "in @fig-2.11.\n",
        "\n",
        "![Examples of signal clipping and distortion. (a) Output waveform is clipped due to supply voltage limit. (b) Output waveform drives the MOSFET into the triode region. ](images/png/figure2.11.png){#fig-2.11 width=100%}\n",
        "\n",
        "**[Example 2-4]{#example-2-4} : Signal clipping**\n",
        "\n",
        "\n",
        "Consider the circuit of @fig-2.9, using the parameters\n",
        "from [Example 2-2](#example-2-2)(b): $V_{DD}$ = 5 $V$, $R_D$ = 10 $kΩ$,\n",
        "*W/L* = 10, and $V_{IN}$ is adjusted to 1.5 V, so that $V_{OUT}$\n",
        "= 2.5 $V$ at the circuit’s operating point. Calculate the\n",
        "most negative excursion that the incremental input\n",
        "voltage $v_{in}$ can assume before the output is “clipped”\n",
        "to $V_{DD}$ (as in @fig-2.11(a)).\n",
        "\n",
        "**SOILUTION**\n",
        "\n",
        "The circuit’s output voltage is given by\n",
        "\n",
        "$$\n",
        "v_{OUT} = V_{DD}-R_D\\cdot \\frac{1}{2}\\mu_n C_{ox}\\frac{W}{L}(V_{IN} + v_{in} -V_{Tn})^2\n",
        "$$\n",
        "\n",
        "Clipping $v_{OUT}$ to the supply voltage implies  $v_{OUT}$ =\n",
        " $V_{DD}$. This requires\n",
        "\n",
        "$$\n",
        " 0= V_{IN} + v_{in} - V_{Tn}\n",
        "$$\n",
        "\n",
        "$$\n",
        " v_{in} = -(V_{IN}  - V_{Tn}) = - (V_{OV})\n",
        "$$\n",
        "\n",
        "$$\n",
        "v_{in} = -(1.5V-0.5V) = -1V\n",
        "$$ \n",
        "\n",
        "In words, applying a negative signal ($v_{in}$) at the input\n",
        "of magnitude larger than 1 V will cause the output to\n",
        "reach the supply voltage. Making $v_i$ more negative\n",
        "will create a “plateau” in the output waveform as\n",
        "shown in @fig-2.11(a).\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;In a majority of analog circuits, it is sufficient to\n",
        "use the large-signal characteristic for bias-point and\n",
        "signal-range calculations. For all other purposes, as\n",
        "for instance voltage gain calculations, it is usually\n",
        "appropriate and justifiable to work with small-signal\n",
        "approximations. Without this clever split in the analysis,\n",
        "most analog circuits of only moderate complexity\n",
        "would not be amenable to hand analysis, simply\n",
        "because the nonlinear nature of the transistors\n",
        "would create prohibitively complex systems of non-\n",
        "linear equations.\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;Circuits that are designed to amplify small signals\n",
        "from a transducer are classical examples where the\n",
        "small-signal approximation works. Consider, for\n",
        "instance, the above-discussed amplifier circuit fed\n",
        "with an input signal from a radio antenna, which is\n",
        "often on the order of several hundred microvolts. As\n",
        "long as $V_{OV}$ is chosen larger than several hundred\n",
        "millivolts, the small signal approximation will hold\n",
        "with reasonable accuracy. Other examples (not covered\n",
        "in this module) include amplifiers that rely on\n",
        "electronic feedback, which tends to minimize the \n",
        "signal excursions around a circuit’s bias point (see\n",
        "[Reference 2](#Reference 2)).\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;As a final remark, it should be noted that even if\n",
        "the input to a circuit is “small,” the output will\n",
        "always show at least some amount of nonlinear distortion.\n",
        " In our basic amplifier, this distortion is\n",
        "caused by the bracketed term in @eq-2.22. In cases\n",
        "where even weak distortion is an issue, the designer\n",
        "often employs computer simulation tools to study\n",
        "the relevant behavior. From a design perspective,\n",
        "deviations from linearity can be minimized if\n",
        "needed. For the discussed common-source amplifier,\n",
        "this is seen from @eq-2.22: decreasing the ratio $v_{in}$ /\n",
        "$V_{OV}$, either by reducing $v_{in}$ or by increasing $V_{OV}$ will\n",
        "result in improved linearity.\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;The exact analysis ofThe exact analysis of nonlinear distortion is\n",
        "beyond the scope of this module, and is typically\n",
        "treated only in advanced integrated circuit texts, as\n",
        "for instance [Reference 3](#Reference 3). We will focus here primarily\n",
        "on studying the relevant behavior of analog circuits\n",
        "using a linear small-signal abstraction, aided by\n",
        "basic bias-point and signal-range calculations.\n",
        "\n",
        "### Transconductance\n",
        "\n",
        "The method of differentiating a circuit’s large-signal\n",
        "transfer characteristic to obtain a small-signal\n",
        "approximation was straightforward for the simple\n",
        "one-transistor circuit discussed so far. Unfortunately,\n",
        "for a larger circuit it is usually much more difficult\n",
        "and often tedious to derive a complete transfer\n",
        "characteristic in the form of @eq-2.17.\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;A clever workaround that is predominantly used\n",
        "in analog circuit analysis is based on linearizing the\n",
        "circuit element-by-element around the operating\n",
        "point. This method is applied in three steps:\n",
        "(1) Compute all node voltages and branch currents\n",
        "at the operating point using the devices’ large-signal\n",
        "model. (2) Substitute linear models for all nonlinear\n",
        "components and compute their parameters using the\n",
        "operating point information. (3) Compute the\n",
        "desired transfer function using the linear model\n",
        "obtained in step 2.\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;The biggest advantage of this method, called\n",
        "**small-signal analysis**, is that it avoids computing the\n",
        "large-signal transfer characteristic of the circuit, and\n",
        "instead defers the transfer function analysis until all\n",
        "elements have been approximated by linear models.\n",
        "The linearized models of nonlinear elements, such as\n",
        "MOSFETs, are typically called **small-signal models**.\n",
        "\n",
        "![(a) Large-signal transfer characteristic of an n-channel MOSFET in the saturation region. (b) Small-signal transconductance ($g_m$) at the operating point.](images/png/figure2.12.png){#fig-2.12 width=100%}\n",
        "\n",
        "\n",
        "We will now illustrate the small-signal analysis\n",
        "approach by applying it to the basic common-source\n",
        "amplifier example covered so far in this chapter.\n",
        "Consider first the MOSFET device in @fig-2.7(a).\n",
        "In general, once the operating point of the transistor\n",
        "is known, the small-signal model is obtained by differentiating\n",
        " the large signal I-V relationships at this\n",
        "point. This is further illustrated in @fig-2.12,\n",
        "assuming that the MOSFET is biased in the saturation region.\n",
        "The proportionality factor that links the\n",
        "incremental drain current ($i_d$) and the gate-source\n",
        "voltage ($v_{gs}$) is given by the slope of the tangent to\n",
        "the large signal transfer characteristic at the bias\n",
        "point. This quantity is called **transconductance**, or\n",
        "$g_m$. Mathematically, we can write\n",
        "\n",
        "$$\n",
        "g_m = \\frac{i_d}{v_{gs}} = \\left. \\frac{di_D}{dv_{GS}} \\right|_{v_{GS}=V_{GS}}\n",
        "$${#eq-2.28}\n",
        "\n",
        "In order to find the transconductance for the saturation\n",
        "region of the device, we evaluate @eq-2.28\n",
        "using @eq-2.7. This yields\n",
        "\n",
        "$$\n",
        "g_m = \\mu_n C_{ox}\\frac{W}{L}(V_{GS}- V_{Tn}) = \\mu_n C_{ox}\\frac{W}{L}V_{OV}\n",
        "$${#eq-2.29}\n",
        "\n",
        "Alternative forms of this expression are obtained by\n",
        "eliminating $V_{OV}$ or $μ_n C_{ox}$ *W/L* using @eq-2.7, which\n",
        "gives\n",
        "\n",
        "$$\n",
        "g_m = \\sqrt{2\\mu_n C_{ox} \\frac{W}{L}I_D}\n",
        "$${#eq-2.30}\n",
        "\n",
        "or \n",
        "\n",
        "$$\n",
        "g_m = \\frac{2I_D}{V_{OV}}\n",
        "$${#eq-2.31}\n",
        "\n",
        "All of the above equations can be used to calculate\n",
        "$g_m$; the choice of which equation is used depends on\n",
        "the given parameters. The physical unit for transconductance is $A/V$ = \n",
        "$Ω^{-1}$, or **Siemens** ($S$).\n",
        "\n",
        "Once the transconductance is determined, we can\n",
        "insert the model of @fig-2.12(b) into the original\n",
        "circuit (@fig-2.7(a)) for further analysis. The\n",
        "resulting small-signal circuit equivalent is shown in\n",
        "@fig-2.13. No modeling modification is needed for\n",
        "the resistor $R_D$, as it is already assumed in\n",
        "@fig-2.7(a) that it follows a linear $I/V$ law\n",
        "($V= I \\cdot R$). However, since the supply voltage is constant\n",
        " in the large-signal model, it must be replaced \n",
        " with 0 V or ground ($GND$) in the small-signal model.\n",
        "This is because the differentiation of a constant\n",
        "quantity yields zero.\n",
        "\n",
        "![Small-signal model of the circuit in @fig-2.7(a).](images/png/figure2.13.png){#fig-2.13 width=100%}\n",
        "\n",
        "\n",
        "Using the model of @fig-2.13, we now apply\n",
        "Kirchhoff’s laws at the output and find\n",
        "$$\n",
        "v_{out} = -g_m \\cdot v_{in} \\cdot R_D\n",
        "$${#eq-2.32}\n",
        "\n",
        "Finally, by substituting @eq-2.31 we obtain\n",
        "\n",
        "$$\n",
        "v_{out} = -\\frac{2I_D}{V_{OV}} \\cdot R_D \\cdot v_{in} = A_v \\cdot v_{in}\n",
        "$${#eq-2.33}\n",
        "\n",
        "As expected, this result is equivalent to what was\n",
        "obtained by applying the small-signal approximation\n",
        "to @eq-2.22, and also by differentiating @eq-2.17 at\n",
        "the operating point. However, as indicated previously,\n",
        "the big advantage of working with a small-signal\n",
        "model for individual transistors is that this\n",
        "simplifies the analysis of larger circuits.\n",
        "\n",
        "###  P-Channel Common-Source Voltage Amplifier\n",
        "\n",
        "As shown in @fig-2.14(a), we can also build a CS\n",
        "amplifier using a p-channel device. Similar to the\n",
        "n-channel case, we can derive a large-signal transfer\n",
        "characteristic using @eq-2.11 and by applying $KVL$\n",
        "at the output node. The resulting plot is shown in\n",
        "@fig-2.14(b). Compared to the n-channel case\n",
        "(@fig-2.7(b)), one can show that the characteristic\n",
        "is flipped sideways (since $V_{SG}$ = $V_{DD}$ - $V_{IN}$) and\n",
        "upside down (because $I_D$ is negative for a p-channel\n",
        "transistor). Therefore, for small $V_{IN}$ near 0 $V$, the\n",
        "device operates in the triode region and the output\n",
        "voltage is close to $V_{DD}$. For $V_{IN}$ = $V_{DD}$, the device is\n",
        "off and the output is at 0 $V$, since $V_{SG}$ = 0 and no current\n",
        "flows in the device.\n",
        "\n",
        "![(a) P-channel common-source amplifier schematic. (b) Voltage transfer characteristic for $V_{DD}$ = 5 V, $R_D$ = 5 $kΩ$, and $W/L$ = 40.](images/png/figure2.14.png){#fig-2.14 width=100%}\n",
        "\n",
        "\n",
        "In terms of its small-signal model, it follows that\n",
        "the p-channel CS amplifier is identical to the n-channel\n",
        "version. This can be seen intuitively by comparing\n",
        "@fig-2.7(b) and @fig-2.14(b): in the region around\n",
        "point $B$, both transfer characteristics exhibit a negative\n",
        "slope and therefore will behave alike for small\n",
        "perturbations. We will show this formally in the following discussion.\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;We begin by inserting a small-signal model for the\n",
        "transistor as shown in @fig-2.15(a). Based on the\n",
        "positive variable convention of @eq-2.11, we define\n",
        "the transconductance for the p-channel transistor as\n",
        "\n",
        "$$\n",
        "g_m = \\left. \\frac{d}{dv_{SG}}((-i_D))\\right |_Q\n",
        "$$\n",
        "\n",
        "$$\n",
        "= \\mu_p C_{ox}\\frac{W}{L}(V_{SG} + V_{Tp})\n",
        "$${#eq-2.34}\n",
        "\n",
        "$$\n",
        "= \\frac{2(-I_D)}{V_{SG}+V_{Tp}} = \\frac{2(-I_D)}{V_{OV}}\n",
        "$$\n",
        "\n",
        "![Small-signal model of the p-channel common-source amplifier: (a) using the p-channel model directly, (b) a flipped version of (a), and (c) with sign changes applied to show equivalence with the n-channel model.](images/png/figure2.15.png){#fig-2.15 width=100%}\n",
        "\n",
        "\n",
        "Note that through this expression, we have defined\n",
        "$V_{OV}$ for the p-channel case as $V_{SG}$ + $V_{Tp}$, which is a\n",
        "positive quantity for a p-channel device in the “ON”\n",
        "state.\n",
        "\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;Although we could solve for the small-signal voltage\n",
        " gain directly with the circuit shown in\n",
        "@fig-2.15(a) it is easier to flip the transistor 180°\n",
        "(Figure 2-15(b)) so that the circuit appears similar to\n",
        "the n-channel version. Since $v_{sg}$=–$v_{gs}$ we can change\n",
        "signs at the input and the dependent current source\n",
        "and find that the p-channel common-source amplifier\n",
        "small-signal model is identical to the n-channel\n",
        "version as shown in @fig-2.15(c).\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;This result applies more generally to all the transistor\n",
        "configurations and model extensions that we\n",
        "will study in this module. Once the operating point\n",
        "parameters of a p-channel device have been determined\n",
        "(e.g., a calculation of $g_m$ using @eq-2.34), it is\n",
        "perfectly valid to replace it with an n-channel equivalent.\n",
        "This is a very powerful and convenient result,\n",
        "since it allows us to focus on n-channel only configurations\n",
        "in small-signal analyses, without having to\n",
        "worry about the specific sign conventions of p-channels.\n",
        "\n",
        "\n",
        "### Modeling Bounds for the Gate Overdrive Voltage\n",
        "\n",
        "According to @eq-2.31, $g_m/I_D$ = $2/V_{OV}$ tends to\n",
        "infinity as the gate overdrive voltage $V_{OV}$\n",
        "approaches zero. This implies that for a transistor\n",
        "that is “barely on,” we can extract very large\n",
        "transconductance values for only small bias currents.\n",
        "Unfortunately, this behavior is incorrect, and stems\n",
        "from limitations of the device model discussed in\n",
        "[Section 2-1](#first-order-mosfet-model). As $V_{OV}$ approaches zero, a more complex\n",
        "analysis is needed to predict the drain current\n",
        "and its derivative with respect to gate voltage see\n",
        "[Reference 4](#Reference 4).\n",
        "\n",
        "@fig-2.16 plots the $g_m/I_D$ characteristic of a\n",
        "MOSFET, and the expected behavior based on\n",
        "@eq-2.31. As we can see, for $V_{OV} < 150 mV$, a large\n",
        "discrepancy exists between a physical device and the\n",
        "prediction based on the simple square-law model\n",
        "used in this treatment. In order to avoid unrealistic\n",
        "design outcomes due to this modeling limitation, we\n",
        "define a bound for the minimum allowed gate overdrive \n",
        "voltage for all circuits covered in this module\n",
        "\n",
        "$$\n",
        "V_{OV}≥ V_{OVmin} = 150 mV\n",
        "$${#eq-2.35}\n",
        "\n",
        "Designing with a smaller $V_{OV}$ would require a more\n",
        "elaborate model for hand calculations, which is\n",
        "beyond the scope of this module. The interested\n",
        "reader is referred to advanced material on this topic,\n",
        "available for example in [References 4 and 5](#Reference 4).\n",
        "\n",
        "![Transconductance to current ratio predicted by @eq-2.31 and the behavior of an actual MOSFET.](images/png/figure2.16.png){#fig-2.16 width=100%}\n",
        "\n",
        "### Voltage Gain and Drain Biasing Considerations \n",
        "\n",
        "In the basic common-source amplifier discussed so\n",
        "far, the drain resistor $R_D$ serves a dual purpose: (1) it\n",
        "translates the device’s incremental drain current ($i_d$)\n",
        "into a voltage ($V_{out}$), and (2) it supplies the quiescent\n",
        "point drain current ($I_D$) for the MOSFET. As we\n",
        "shall show next, this creates an undesired link\n",
        "between the bias point constraints of the circuit and\n",
        "the achievable small-signal voltage gain of the amplifier.\n",
        "To see this, we rewrite @eq-2.33  as shown\n",
        "below\n",
        "\n",
        "$$\n",
        "A_v = - \\frac{2I_D}{V_{OV}} \\cdot R_D = -2\\frac{V_R}{V_{OV}}\n",
        "$${#eq-2.33}\n",
        "\n",
        "where $V_R$ = $V_{DD} – V_{OUT}$ is the voltage drop across RD\n",
        "at the operating point. This result leads to several\n",
        "interesting conclusions. First, note that the voltage\n",
        "gain of the amplifier is fully determined once $V_{OV}$\n",
        "and voltage drop across $R_D$ are known. For example,\n",
        "if the circuit is biased such that $V_{OV}$ = 0.2 $V$ and $V_R$ =\n",
        "2 $V$, we have $A_v$ = –20; regardless of the particular W,\n",
        "L or $\\mu_n$ $C_{ox}$ of the employed MOSFET. Second, since\n",
        "the possible values for $V_{OV}$ are lower-bounded\n",
        "(@eq-2.35) and $V_R$ is upper-bounded (finite $V_{DD}$),\n",
        "there exists a maximum possible $A_v$ that can be\n",
        "obtained\n",
        "\n",
        "$$\n",
        "|A_{vmax}| = 2\\frac{V_{Rmax}}{V_{OVmin}} = 2\\frac{V_{DD}-V_{OVmin}}{V_{OVmin}} ≅ 2\\frac{V_{DD}}{V_{OVmin}} \n",
        "$${#eq-2.37}\n",
        "\n",
        "In this result, it was assumed the transistor is biased\n",
        "at the edge of the triode region, a somewhat impractical,\n",
        "but appropriate limit case to consider. Evaluating\n",
        "the above expression for $V_{DD}$ = 5 V and $V_{OVmin}$ =\n",
        "150 $mV$ yields $|A_{vmax}|$ ≅ 67. Can we overcome this\n",
        "limit and change our amplifier such that it can\n",
        "achieve voltage gains beyond this value?\n",
        "\n",
        "In order to investigate this, consider the load line\n",
        "illustrations shown in @fig-2.17. As explained in\n",
        "[Section 2-2-2](#load-line-analysis), the load line for our circuit is defined\n",
        "by the points (0, $V_{DD}$/$R_D$) and ($V_{DD}$, 0). From the\n",
        "location of these points, we see that the x-axis intercept\n",
        "of the load line is fixed, while the y-intercept\n",
        "moves lower with larger values of $R_D$. This reduces\n",
        "the slope of the load line, resulting in a larger\n",
        "small-signal voltage gain of the circuit. Furthermore,\n",
        "note that for a fixed quiescent point drain current $I_D$,\n",
        "larger $R_D$ shifts the output bias point $V_{OUT}$ to smaller\n",
        "values, i.e., closer to the edge of the MOSFET’s triode\n",
        "region. This observation captures the result of\n",
        "@eq-2.37 in a graphical way: we cannot increase the\n",
        "small-signal voltage gain beyond a certain limit due\n",
        "the link between $V_{OUT}$ and the chosen $R_D$.\n",
        "\n",
        "![Amplifier load lines for large and small values of $R_D$.](images/png/figure2.17.png){#fig-2.17 width=100%}\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;A more ideal situation is depicted in @fig-2.18.\n",
        "If we could somehow create a load line that\n",
        "“rotates” about the desired operating point (as a\n",
        "function of $R_D$), the voltage gain could be set independently\n",
        "of $V_{OUT}$. A modified drain network that\n",
        "lets us achieve this behavior is shown in\n",
        "@fig-2.19(a). In this circuit, $R_D$ is now connected\n",
        "to a voltage $V_B$ (instead of the supply voltage $V_{DD}$)\n",
        "and an ideal current source $I_B$ is used to provide a\n",
        "fixed current. In a realistic implementation circuit, $I_B$\n",
        "can be built, for example, using a p-channel MOSFET\n",
        "that operates in saturation. For the time being,\n",
        "we will neglect such implementation details, and\n",
        "postpone the discussion of current sources to\n",
        "[Chapter 5](#Chapter 5).\n",
        "\n",
        "![Desired load line behavior.](images/png/figure2.18.png){#fig-2.18 width=100%}\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;With this new configuration, the relationship\n",
        "between $i_D$ and $v_{OUT}$ becomes\n",
        "\n",
        "$$\n",
        "i_D = I_B = \\frac{V_B - v_{OUT}}{R_D}\n",
        "$${#eq-2.38}\n",
        "\n",
        "or \n",
        "$$\n",
        "v_{OUT} = V_B + (I_B - i_D)R_D \n",
        "$${#eq-2.39}\n",
        "\n",
        "As we can see from these equations (also graphically\n",
        "shown in @fig-2.19(b)), at the point $v_{OUT}$ = $V_B$, we\n",
        "have $i_D$ = $I_B$, regardless of the value of $R_D$$. Therefore,\n",
        "utilizing this point as the operating point of our\n",
        "amplifier precisely achieves the goal we have in\n",
        "mind. In particular, we wish to set $I_B$ = $I_D$, the desired\n",
        "quiescent point drain current of the MOSFET, and\n",
        "$V_B$ = $V_{OUT}$, the desired output operating point. With\n",
        "this choice, the role of the current source is to provide\n",
        "the MOSFET’s bias current, while the resistor\n",
        "RD is responsible only for converting the incremental\n",
        "drain current into an incremental output voltage;\n",
        "no DC bias current flows in this element.\n",
        "\n",
        "![(a) CS amplifier with modified drain biasing scheme. (b) Load line characteristic.](images/png/figure2.19.png){#fig-2.19 width=100%}\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;Since the voltage source $V_B$ and the current\n",
        "source $I_B$ aid in maintaining the circuit’s bias point,\n",
        "we generally classify these elements as biasing\n",
        "sources. However, it is important to distinguish their\n",
        "function from the input bias voltage $V_{IN}$. $V_{IN}$ directly\n",
        "sets the quiescent point gate-source voltage of the\n",
        "transistor and therefore fully defines the operating\n",
        "point on the MOSFET’s I-V characteristic and the\n",
        "corresponding drain current. In the above-described\n",
        "scenario, $I_B$ is adjusted to supply this same drain current,\n",
        "but does not define it. We therefore categorize\n",
        "$I_B$ an **auxiliary bias** current that helps sustain, but\n",
        "does not set the quiescent point of the transistor.\n",
        "Since $V_B$ defines the quiescent point output voltage\n",
        "of the circuit, we refer to this element as the **output bias voltage.**\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;Lastly, it is important to note that for the modified circuit in \n",
        "@fig-2.19(a), the previously derived\n",
        "small-signal model shown in @fig-2.13 still applies.\n",
        "This can be understood by differentiating @eq-2.39\n",
        "at the operating point to find the small-signal equivalent\n",
        "of the network placed at the drain of the amplifier\n",
        "\n",
        "$$\n",
        "\\left. \\frac{dv_{out}}{di_D} \\right|_Q = \\frac{d}{di_D}(V_B +(I_B - i_D)R_D) = -R_D\n",
        "$${#eq-2.40}\n",
        "\n",
        "As this result indicates, and as we have seen previously,\n",
        "any constant sources, such as $V_B$, $I_B$, etc., drop\n",
        "out of the small signal model, which captures only\n",
        "components that affect the incremental changes in\n",
        "currents and voltages around the circuit’s operating\n",
        "point.\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;For the circuit in @fig-2.19(a), one might now\n",
        "be tempted to think that we can obtain an arbitrarily\n",
        "large voltage gain, as long as $R_D$ is made very large.\n",
        "Unfortunately this is not the case for several reasons,\n",
        "the first of which stems from physical effects that we\n",
        "have not yet included in the MOSFET model. This\n",
        "aspect is further discussed in [Section 2-3](#channel-length-modulation). In addition,\n",
        "there are practical limitations to the attainable\n",
        "voltage gain, discussed next.\n",
        "\n",
        "### Sensitivity of the Bias Point to Component Mismatch$^*$\n",
        "\n",
        "<!--QUESTION check star after \"mismatch\" two lines above, no actual star bulletpoint--> \n",
        "Consider a CS amplifier biased at the gate as done\n",
        "previously with a bias voltage $V_{IN}$, directly setting up\n",
        "the quiescent point drain current $I_D$ (depending on\n",
        "$W/L$ and other relevant device parameters). Our\n",
        "goal in using the drain bias network of\n",
        "@fig-2.19(a) is then to set $I_B$ = $I_D$ and chose $VB$\n",
        "such the output is biased at a reasonable, desired\n",
        "$V_{OUT}$. Unfortunately, in practice, we can never\n",
        "achieve $I_B$ = $I_D$ exactly; there will always be a non-\n",
        "zero $ΔI$ = $I_B$ – $I_D$. This case is shown in @fig-2.20.\n",
        "As illustrated, the finite $ΔI$ leads to a shift $ΔV$ away\n",
        "from the desired output operating point $V_B$. This\n",
        "shift is proportional to $R_D$, since the current difference $ΔI$ \n",
        "flows into $R_D$, creating the undesired $ΔV$.\n",
        "\n",
        "![ Bias point shift due to mismatch in $I_B$ and $I_D$.](images/png/figure2.20.png){#fig-2.20 width=100%}\n",
        "\n",
        "\n",
        "**[Example 2-5]{#example-2-5}: Output Bias Voltage Shift due to Current Mismatch**\n",
        "\n",
        "Consider the CS amplifier of @fig-2.19(a), biased\n",
        "at the gate such that $V_{OV}$ = 500 mV. Assume $I_D$ = \n",
        "200 $μA$, and that $R_D$ is chosen such that the \n",
        "amplifier\n",
        "achieves $A_v$ = –400. Considering @fig-2.20, how\n",
        "much mismatch between $I_B$ and $I_D$ (in $%$) can be \n",
        "tolerated\n",
        " such that $V_{OUT}$ deviates from the intended\n",
        "bias point ($V_B$) by no more than $ΔV$ = 500 $mV$?\n",
        "Repeat this calculation for $A_v$ = –40 and –4.\n",
        "\n",
        "**SOLUTION**\n",
        "\n",
        "We begin by computing the transconductance of the\n",
        "MOSFET\n",
        "\n",
        "$$\n",
        "g_m = \\frac{2I_D}{V_{OV}} = \\frac{2 \\cdot 200\\mu_A}{0.5V} = 800 µS\n",
        "$$ \n",
        "\n",
        "In order to achieve $A_v$ = –400, we require $R_D$ =\n",
        "400/800 $μS = 500 kΩ$. Therefore,\n",
        "\n",
        "$$\n",
        "\\frac{∆ I}{I_D} = \\frac{∆V}{I_D R_D} < \\frac{500 mV}{200\\mu A \\cdot 500kΩ} = 0.5 \\%\n",
        "$$\n",
        "\n",
        "For $A_v$ = –40 and $A_v$ = –4, the result modifies to 5%,\n",
        "and 50%, respectively.\n",
        "\n",
        "As expected, this result confirms that for larger $|A_v|$,\n",
        "the auxiliary bias current $I_B$ must match the MOSFETs\n",
        "drain current more accurately. How precisely\n",
        "can we match these two currents? Unfortunately,\n",
        "answering this question in detail is beyond the scope\n",
        "of this module, and is the subject of advanced\n",
        "research papers such as [Reference 6](#Reference 6). Nonetheless, it\n",
        "can be said in general that matching currents, voltages,\n",
        "or any other electrical quantities in today’s\n",
        "integrated circuits to better than 1% requires special\n",
        "care and understanding. In some cases, even 10%\n",
        "matching can be hard to guarantee. With this guideline\n",
        "in mind, it becomes clear that the circuit of \n",
        "@fig-2.19(a) may become impractical if we aim for\n",
        "too much voltage gain.\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;The general issue of properly dealing with variability\n",
        "in integrated circuit components is a complex\n",
        "topic that is still being actively researched. At the\n",
        "introductory level of this module, the main point\n",
        "that the reader should retain is that any circuit whose\n",
        "bias point relies on precisely matched components\n",
        "or high absolute accuracy in any electrical parameter\n",
        "may not be robust in the presence of component\n",
        "variability. In general, experienced circuit designers\n",
        "avoid situations that resemble the “balancing of a\n",
        "marble on the tip of a cone,” i.e., circuits that will be\n",
        "overly sensitive to variations in component parameters.\n",
        "We will take up this point once more when discussing\n",
        "practical biasing circuits in [Chapter 5](#Chapter 5).\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;As a final note concerning the issue of variability,\n",
        "it is worth mentioning that electronic feedback can\n",
        "help alleviate problems as the one analyzed in\n",
        "[Example 2-5](#example-2-5). Picture for example adding an auxiliary\n",
        "circuit to @fig-2.19(a) that somehow measures\n",
        "VOUT, and adjusts $V_{IN}$ (and therefore $I_D$) until the\n",
        "desired output operating voltage is set. In such\n",
        "schemes, relatively large variations in $I_B$ can be\n",
        "absorbed. Feedback circuits are not covered in this\n",
        "module, but are the subject of advanced texts such as\n",
        "[Reference 2](#Reference 2).\n",
        "\n",
        "\n",
        "## Channel Length Modulation\n",
        "\n",
        "The MOSFET model used so far assumes that the\n",
        "drain current in the saturation region is independent\n",
        "of the drain-source voltage. This behavior corresponds\n",
        "to that of an ideal current source, which is\n",
        "generally non-physical. A more realistic output characteristic\n",
        "observed in real MOSFETs is shown in\n",
        "@fig-2.21. For a physical MOSFET, $I_D$ tends to\n",
        "increase with $V_{DS}$; an effect that can be explained (to\n",
        "first-order) as a voltage dependent modulation of\n",
        "the channel length (see [Section 2-3-1](#the-λ-model)).\n",
        "\n",
        "![Realistic n-channel I-V plots, incorporating the dependence of saturation drain current on $V_{DS}$. (solid lines), along with the first-order model assumed previously (dotted lines). Parameters: W = 20 $μm$, L = 2 $μm$.](images/png/figure2.21.png){#fig-2.21 width=100%}\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;When inserted into the circuit of @fig-2.19(a),\n",
        "the dependence of drain current on $v_{DS}$ ($v_{OUT}$), will\n",
        "have an impact on the overall transfer characteristic\n",
        "of the amplifier, which we will thus consider in this\n",
        "section. For simplicity, let us first investigate the case\n",
        "of $R_D$ --> ∞, i.e., no explicit drain resistance, and\n",
        "using only an ideal current source in the drain biasing\n",
        "network (see @fig-2.22(a)). In this case, the\n",
        "load line is horizontal at $I_B$ = $I_D$, as shown in\n",
        "@fig-2.22(b). As before, the operating point $Q$ is\n",
        "established at the point where the load line and the\n",
        "device’s drain characteristic for the applied quiescent\n",
        "point input voltage ($V_{IN}$) meet.\n",
        "\n",
        "\n",
        "![(a) Intrinsic voltage gain stage. (b) Load line plot.](images/png/figure2.22.png){#fig-2.22 width=100%}\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;Note that similar to the case considered in the\n",
        "previous section, the output operating point voltage\n",
        "in this circuit will shift by large amounts for relatively\n",
        "small changes in $I_B$ (or MOSFET parameters).\n",
        "This issue must be addressed when this circuit is used\n",
        "in practice, for example by providing a feedback\n",
        "mechanism that adjusts $I_B$ such that the desired $V_{OUT}$\n",
        "is maintained in the presence of component variations.\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;Assuming that a well-defined operating point has\n",
        "been established by some means, incremental\n",
        "changes in $v_{IN}$ applied around the bias point $Q$ will\n",
        "force the intersection of the horizontal load line with\n",
        "the MOSFET’s drain characteristics to move sideways\n",
        "(since the drain current cannot change), creating\n",
        "a finite output voltage excursion vout. The\n",
        "magnitude of this voltage excursion, and thus the\n",
        "voltage gain of the circuit, depends on the slope of\n",
        "the MOSFET’s drain characteristic in saturation.\n",
        "The voltage gain achieved in this configuration is\n",
        "commonly called the **intrinsic voltage gain** of the\n",
        "MOSFET, as it represents the voltage gain of the\n",
        "transistor by itself, without any added resistances in\n",
        "the drain bias network. By the same reasoning, the\n",
        "circuit of @fig-2.22(a) is often called the **intrinsic\n",
        "voltage gain stage**. The voltage gain and other\n",
        "parameters of more complex amplifier circuits are\n",
        "often directly related to the intrinsic voltage gain of\n",
        "their constituent transistors, giving this parameter a\n",
        "fundamental significance in circuit design.\n",
        "\n",
        "### The λ-Model\n",
        "\n",
        "Unfortunately, the intrinsic voltage gain of a MOSFET\n",
        "cannot be predicted using the MOSFET model\n",
        "established so far. We will therefore extend the\n",
        "first-order MOSFET model to incorporate the\n",
        "dependence of the saturation current on the\n",
        "drain-source voltage. As a first step, we will describe\n",
        "the effect in terms of large-signal equations. Next,\n",
        "we will apply a small-signal approximation that\n",
        "makes it possible to capture the $I_{Dsat} – V_{DS}$ dependence\n",
        " through a single resistor added to the MOSFET’s\n",
        " small-signal model.\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;We begin by revisiting an approximation that was\n",
        "made in [Section 2-1](#first-order-mosfet-model). In order to arrive at the constant\n",
        "drain current expression in saturation\n",
        "(@eq-2.7), it was assumed that $ΔL$, the distance\n",
        "from the pinch-off point to the drain, is negligible\n",
        "relative to the channel length L. In reality, this\n",
        "approximation is fine only as long we do not care\n",
        "about the $I_D-V_{DS}$ dependence seen in @fig-2.21.\n",
        "Therefore, in order to get a quantitative handle on\n",
        "the MOSFET’s intrinsic voltage gain, we must further\n",
        "investigate the impact of the physics at the drain\n",
        "side.\n",
        "\n",
        "The simplest possible way to proceed is to factor\n",
        "$ΔL$ into the existing derivation of [Section 2-1](#first-order-mosfet-model).\n",
        "Instead of integrating @eq-2.5 over the length L, we\n",
        "use $L– ΔL$ as the upper limit of the integral. Recall\n",
        "that $L– ΔL$ is the actual location where the mobile\n",
        "charge vanishes, i.e., $Qn(y)= 0$. With this change we\n",
        "obtain the following expression for the saturation\n",
        "region.\n",
        "\n",
        "$$\n",
        "I_D = \\frac{1}{2} \\mu_n C_{ox} \\frac{W}{L-∆L} ({V_{GS}} - V_{Tn})^2\n",
        "$${#eq-2.41}\n",
        "\n",
        "Now, provided that $ΔL$ is still small (but not negligible) \n",
        "relative to $L$, we can apply the following\n",
        "first-order approximation:\n",
        "\n",
        "$$\n",
        "\\frac{1}{L-∆L} ≈ \\frac{1}{L}(1+\\frac{∆L}{L})\n",
        "$${#eq-2.42}\n",
        "\n",
        "Next, note that $ΔL$ must be a function of the drain\n",
        "voltage, since the depletion region widens with\n",
        "increasing reverse bias. This effect is commonly\n",
        "called **channel length modulation**. Unfortunately, an\n",
        "exact calculation of $ΔL$ as a function of the terminal\n",
        "voltages involves solving the two-dimensional Poisson\n",
        "equation and leads to complex expressions. For\n",
        "simplicity, we assume that the fractional change in\n",
        "channel length is proportional to the drain voltage\n",
        "\n",
        "$$\n",
        "\\frac{∆L}{L} = \\lambda_n V_{DS}\n",
        "$${#eq-2.43}\n",
        "\n",
        "where $\\lambda_n$ is the channel length modulation parameter.\n",
        "Device measurements and simulations indicate\n",
        "that $\\lambda_n$ approximately varies with the inverse of the\n",
        "channel length. For the MOSFETs in this module,\n",
        "we will use\n",
        "\n",
        "$$\n",
        "\\lambda_n = \\frac{0.1\\mu mV^(-1)}{L}\n",
        "$${#eq-2.44}\n",
        "\n",
        "where $L$ is in $\\mu_nm$. Finally, we substitute @eq-2.44\n",
        "and @eq-2.43 into @eq-2.41 and find a very useful\n",
        "approximation to the drain current in saturation,\n",
        "often called the $\\lambda$-**model**:\n",
        "\n",
        "$$\n",
        "I_D = \\frac{1}{2} \\mu_n C_{ox} \\frac{W}{L} ({V_{GS}} - V_{Tn})^2 (1+\\lambda_n V_{DS})\n",
        "$${#eq-2.45}\n",
        "\n",
        "where $V_{DS}$ ≥$V_{DSsat} = V_{GS}-V_{Tn}$. This model has\n",
        "proven useful and sufficiently accurate for basic\n",
        "hand calculations, even though the physics related to\n",
        "the $I_{DSsat}$-$V_{DS}$ dependence are in reality much more\n",
        "complex than discussed above. As long as $\\lambda_n$ is determined\n",
        "from measurements or accurate physical\n",
        "analysis, the model properly approximates a typical\n",
        "MOSFET’s I-V characteristic to first-order.\n",
        "Higher-order models are typically not used in hand\n",
        "analysis, but find their use in advanced computer\n",
        "simulation models.\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;We now wish to incorporate the channel length\n",
        "modulation effect into the small-signal model of the\n",
        "MOSFET. An important new feature that must be\n",
        "considered in this task is that the drain current of\n",
        "@eq-2.45 now depends on two voltages, namely $V_{DS}$\n",
        "and $V_{GS}$. A common and appropriate way of handling\n",
        " this situation for small-signal modeling is to\n",
        "approximate the incremental drain current around\n",
        "the operating point as the total differential (as frequently\n",
        "used in error analysis) due to both variables,\n",
        "i.e.\n",
        "\n",
        "$$\n",
        "i_d = \\left. \\frac{∂ i_D}{∂ V_{GS}}\\right |_Q \\cdot v_{gs} + \\left. \\frac{∂ i_D}{∂ V_{GS}}\\right |_Q \\cdot v_{ds}\n",
        "$${#eq-2.46}\n",
        "\n",
        "\n",
        "The above expression essentially treats $v_{DS}$ as a constant\n",
        "when evaluating the derivative of $i_D$ with\n",
        "respect to $v_{GS}$. Similarly, $v_{GS}$ is assumed constant in\n",
        "the differentiation with respect to $v_{DS}$. This use of\n",
        "partial differentiation is justified and reasonably\n",
        "accurate as long as at least one of the following two\n",
        "conditions is met:\n",
        "\n",
        "1. The excursion in the variable that is treated as a\n",
        "constant can be approximated as infinitesimally\n",
        "small and therefore negligible.\n",
        "\n",
        "2. The excursion in the variable that is approximated\n",
        " as a constant is considerable, but nonetheless\n",
        " does not affect the derivative with\n",
        "respect to the second variable.\n",
        "\n",
        "In the context of a common-source amplifier, for\n",
        "instance, the first condition applies to $v_{GS}$. Just as in\n",
        "the derivation of the simple small-signal model without\n",
        " $V_{DS}$ dependence, we can argue that changes in\n",
        "$v_{GS}$ are suitably modeled as “small” (relative to\n",
        "$V_{OV}$). The same condition cannot be applied to $v_{DS}$\n",
        "in general. Often times the output voltage, and\n",
        "therefore $v_{DS}$, see large excursions in amplifier\n",
        "circuits. In order for @eq-2.46 to be reasonably\n",
        "accurate, we must require the second condition, i.e.,\n",
        "the derivative of $i_D$ **w.r.t.** $v_{GS}$ must not strongly\n",
        "depend on drain-source voltage. By inspection of\n",
        "@eq-2.45, we see that this condition is met as long as\n",
        "$\\lambda_n$ is small, which is typically the case for MOSFETs\n",
        "intended for use in amplifier stages.\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;To continue with our analysis, we rewrite\n",
        "@eq-2.46 as \n",
        "$$\n",
        "i_d = g_m v_{gs} + g_o v_{ds}\n",
        "$${#eq-2.47}\n",
        "\n",
        "where \n",
        "$$\n",
        "g_m = \\left. \\frac{∂ i_D}{∂ V_{GS}}\\right |_Q =  \\mu_n C_{ox} \\frac{W}{L} ({V_{GS}} - V_{Tn}) (1+\\lambda_n V_{DS}) = \\frac{2I_D}{{V_{GS}} - V_{Tn}} = \\frac{2I_D}{V_{OV}}\n",
        "$${#eq-2.48}\n",
        "\n",
        "and \n",
        "$$\n",
        "g_o = \\left. \\frac{∂ i_D}{∂ V_{GS}}\\right |_Q =  \\frac{1}{2}\\mu_n C_{ox} \\frac{W}{L} ({V_{GS}} - V_{Tn})^2 \\lambda_n = \\frac{2I_D}{{V_{GS}} - V_{Tn}} = \\frac{2I_D}{V_{OV}}\n",
        "$${#eq-2.49}\n",
        "\n",
        "\n",
        "where the approximate end result assumes $\\lambda_n V_{DS}$ $\\ll$ 1,\n",
        " a condition that is often satisfied for long channels\n",
        "and moderate $V_{DS}$. For instance, assuming L = 2 $\\mu$m\n",
        "and  $V_{DS}$ = 2 $V$ gives  $\\lambda_nV_{DS}$ = 0.1 which is much less\n",
        "than one.\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;In the above expressions, $g_m$ is the transconductance\n",
        "of the MOSFET (as defined previously) and go\n",
        "is called the output conductance. The inverse of go is\n",
        "called the output resistance, $r_o$ = $g_o^{-1}$.\n",
        " Graphically,the output conductance corresponds to the slope of\n",
        "the transistor’s drain characteristic at the operating\n",
        "point, which is the derivative of $i_D$ with respect to\n",
        "$v_{DS}$, while keeping the gate-source voltage constant\n",
        "(see @fig-2.23(a)). In the small-signal model of the\n",
        "MOSFET, the output conductance can be included\n",
        "as shown in @fig-2.23(b). This representation follows\n",
        "directly from @eq-2.47, which represents Kirchhoff’s Current Law equation for the drain node\n",
        "of the transistor.\n",
        "\n",
        "![(a) Graphical interpretation of $g_o$. (b) MOSFET small-signal model for the saturation region with output conductance ($g_o$).](images/png/figure2.23.png){#fig-2.23 width=100%}\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;Just as with the simple $g_m$-only small-signal model\n",
        "of @fig-2.12, the main idea for the usage of the\n",
        "extended model with go is to use the small-signal\n",
        "equivalent circuit of @fig-2.23(b) in a larger circuit.\n",
        " We will illustrate this using two examples of\n",
        "interest: the intrinsic voltage gain stage of\n",
        "@fig-2.22(a) and the common-source amplifier of\n",
        "@fig-2.19(a).\n",
        "\n",
        "### Common-Source Voltage Amplifier Analysis Using the $\\lambda$-Model\n",
        "\n",
        "\n",
        "For the intrinsic voltage gain stage, the small-signal\n",
        "model of @fig-2.23(b) corresponds directly to the\n",
        "small-signal model for the entire circuit with $v_{in} = v_{gs}$\n",
        "and $v_{out} = v_{ds}$. Therefore, the voltage gain of the\n",
        "intrinsic gain stage is given by\n",
        "\n",
        "$$\n",
        "A_v = -\\frac{g_m}{g_o} = - g_m r_o ≅ - \\frac{2I_D}{V_{OV}} \\cdot\\frac{1}{\\lambda_n I_D} = - \\frac{2}{\\lambda_n V_{OV}} \n",
        "$${#eq-2.50}\n",
        "\n",
        "\n",
        "From this expression, we can see that the voltage\n",
        "gain can be increased by increasing $L$, which will\n",
        "decrease $\\lambda$. Alternatively, the voltage gain can be\n",
        "increased by reducing $V_{OV}$, which corresponds to\n",
        "reducing the drain current $I_D$ for a fixed aspect\n",
        "ration $W/L$. In this context, note that for $V_{OV}$ → 0,\n",
        "@eq-2.50 predicts infinite voltage gain. This\n",
        "non-physical outcome stems from the same issue\n",
        "already discussed in [Section 2-2-7](#modeling-bounds-for-the-gate-overdrive-voltage): for $V_{OV} → 0, $g_m$\n",
        "approaches infinity for a fixed current in our simplistic\n",
        "square-law I-V model. As argued before, the\n",
        "usable range for $V_{OV}$ must therefore be\n",
        "lower-bounded as specified in @eq-2.35. Assuming\n",
        "$V_{OV} = V_{OVmin}$ = 150 $mV$ and L = 1 $μm$, the intrinsic\n",
        "voltage gain of a MOSFET described by the parameters\n",
        " used in this module is approximately\n",
        "2/(0.1·0.15) = 133.\n",
        "\n",
        "Let us now consider the common-source amplifier\n",
        "of @fig-2.19(a). Including the finite output\n",
        "conductance from the $\\lambda$-model, the small-signal\n",
        "model is modified as shown in @fig-2.24 and the\n",
        "voltage gain expression becomes\n",
        "\n",
        "$$\n",
        "A_v = -g_m \\left( \\frac{1}{r_o} + \\frac{1}{R_D} \\right)^{-1} \n",
        "= -g_m R_{out}\n",
        "$${#eq-2.51}\n",
        "\n",
        "\n",
        "\n",
        "![Small-signal model for the circuit of @fig-2.19(a), with finite output conductance.](images/png/figure2.24.png){#fig-2.24 width=100%}\n",
        "\n",
        "<!-- TODO Schemdraw --> \n",
        "For $R_D$ → $∞$ , the small signal voltage gain\n",
        "approaches the intrinsic voltage gain as given by\n",
        "@eq-2.50. For $R_D \\ll r_o$, we can approximate $A_v ≅ –g_m R_D$. \n",
        "More generally, without even knowing the\n",
        "exact values of $r_o$ and $R_D$, we can argue that as long\n",
        "as the desired gain is much less (in magnitude) than\n",
        "the intrinsic voltage gain, $r_o$ can be neglected in the\n",
        "voltage gain calculation. To see this, we can rewrite\n",
        "@eq-2.51 as\n",
        "\n",
        "$$\n",
        "\\frac{1}{|A_v|} = \\frac{1}{g_m r_o} + \\frac{1}{g_m \n",
        "R_D}\n",
        "$$\n",
        "\n",
        "\n",
        "$$\n",
        "g_m R_D = \\frac{|A_v|}{1 - \\frac{|A_v|}{g_m r_o}} ≅ |A_v| \\quad \\text{for} \\quad |A_v| \\ll g_m r_o\n",
        "$${#eq-2.52}\n",
        "\n",
        "\n",
        "\n",
        "**[Example 2-6]{#example-2-6}: Analysis of a CS Amplifier Using the $\\lambda$ -Model** \n",
        "\n",
        "Consider the CS voltage amplifier of @fig-2.19(a)\n",
        "with $W$ = 80 $μm$, $L$ = 2 $μm$ and $R_D$ = 50 $kΩ$. The gate\n",
        "is biased such that $V_{OV} = 500 mV$ and $V_B$ is set to 2 $V$,\n",
        "which is also the desired output operating point\n",
        "$V_{OUT}$. Compute the required bias current $I_B$ and the\n",
        "small-signal voltage gain of the circuit using the\n",
        "$\\lambda$-model. Repeat the small-signal voltage gain calculation\n",
        "for $R_D$ = 5 $kΩ$.\n",
        "\n",
        "**SOLUTION** \n",
        "\n",
        "The bias current is found using \n",
        "\n",
        "$$\n",
        "I_B = I_D = \\frac{1}{2} \\mu_n C_{ox} \\frac{W}{L} ({V_{GS}} - V_{Tn})^2 (1+\\lambda_n V_{DS})\n",
        "$$\n",
        "\n",
        "$$\n",
        "\\frac{1}{2} \\cdot 50 \\frac{\\mu A}{V^2} \\cdot \\frac{80}{2}(0.5V)^2(1+0.05 \\cdot 2)\n",
        "$$\n",
        "\n",
        "$$\n",
        "= 275 \\mu A\n",
        "$$\n",
        "\n",
        "\n",
        "\n",
        "The corresponding transconductance and output\n",
        "resistance at the operating point are\n",
        "\n",
        "$$\n",
        "g_m = \\frac{2I_D}{V_{OV}} = \\frac{2 \\cdot 275 \\mu A}{0.5 V} = 1.1 mS\n",
        "$$\n",
        "\n",
        "$$\n",
        "r_o = \\frac{1+\\lambda_n V_{DS}}{\\lambda_n I_D} = \\frac{1+ 0.05 \\cdot 2}{0.5V^{-1} \\cdot 275\\mu A}\n",
        " = 80 kΩ\n",
        "$$\n",
        "\n",
        "According to @eq-2.51, the small signal voltage gain\n",
        "for $R_D$ = 50 $kΩ$ is given by\n",
        "\n",
        "$$\n",
        "A_v = -1.1mS (\\frac{1}{80kΩ} + \\frac{1}{50kΩ})^{-1} = -33.9\n",
        "$$\n",
        "\n",
        "for $R_D$ = 5 $kΩ$ we find \n",
        "\n",
        "$$\n",
        "A_v = -1.1mS (\\frac{1}{80kΩ} + \\frac{1}{5kΩ})^{-1} = -5.18\n",
        "$$\n",
        "\n",
        "Since the voltage gain for $R_D$ = 5 $kΩ$ is much less than\n",
        "the intrinsic voltage gain of the transistor ($g_m r_o$ = 88),\n",
        "it is appropriate to neglect $r_o$ in this calculation. We\n",
        "can simply compute\n",
        "\n",
        "$$\n",
        "A_v = -1.1 mS \\cdot 5 kΩ = -5.5 \n",
        "$$\n",
        "\n",
        "This result differs only by about 5.9% from the accurate calculation.\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;Another opportunity for useful engineering\n",
        "approximations in the application of the $\\lambda$-model lies\n",
        "in the operating point calculation. We will illustrate\n",
        "this point through the example below.\n",
        "\n",
        "**[Example 2-7]{#example-2-7}: Approximate Operating Point Calculations**\n",
        "\n",
        "Recalculate $I_D$, $g_m$ and $r_o$ by approximating $\\lambda$$V_{DS} ≅ 0$\n",
        "in the large-signal bias point calculations. Also recalculate\n",
        "$A_v$ for $R_D$ = 50 $kΩ$ using this approximation.\n",
        "Compare the results to the values obtained in  [Example 2-6](#example-2-6).\n",
        "\n",
        "\n",
        "**SOLUTION**\n",
        "\n",
        "For $\\lambda$ $V_{DS}$ ≅ 0, the bias current is estimated as\n",
        "\n",
        "$$\n",
        "I_B = I_D = \\frac{1}{2} \\mu_n C_{ox} \\frac{W}{L} ({V_{GS}} - V_{Tn})^2 \n",
        "$$\n",
        "\n",
        "$$\n",
        "= \\frac{1}{2} \\cdot 50 \\frac{\\mu A}{V^2} \\cdot \\frac{80}{2}(0.5V)^2\n",
        "$$\n",
        "\n",
        "$$\n",
        "= 250 \\mu A\n",
        "$$\n",
        "\n",
        "The corresponding transconductance and output\n",
        "resistance at the operating point are\n",
        "\n",
        "$$\n",
        "g_m = \\frac{2I_D}{V_{OV}} = \\frac{2 \\cdot 250 \\mu A}{0.5 V} = 1 mS\n",
        "$$\n",
        "\n",
        "$$\n",
        "r_o = \\frac{1}{\\lambda_n I_D} = \\frac{1 }{0.5V^{-1} \\cdot 250\\mu A} = 80kΩ\n",
        "$$\n",
        "\n",
        "and the voltage gain becomes\n",
        "\n",
        "$$\n",
        "A_v = -1mS (\\frac{1}{80kΩ} + \\frac{1}{50kΩ})^{-1} = -30.8\n",
        "$$\n",
        "\n",
        "Relative to the accurate calculation from\n",
        "[Example 2-6](#example-2-6) ($A_v$ = –33.9), this result is in error by\n",
        "only about 9.1%.\n",
        "\n",
        "<!-- FIXME typo example 3-6  example 2-6--> \n",
        "\n",
        "There are several reasons why it is commonly\n",
        "acceptable to neglect the $\\lambda$$V_{DS}$ term in bias point\n",
        "hand calculations. First, without this approximation,\n",
        "the calculations can become cumbersome and lead\n",
        "to transcendental equations that are tedious and\n",
        "undesirable to solve in light of only a moderate \n",
        "percent-improvement in the obtained accuracy. If a\n",
        "more accurate result is desired, it can often be\n",
        "obtained more easily from computer simulations,\n",
        "which often follow a hand calculation in practice\n",
        "anyway. Last, one can argue that any circuit in which\n",
        "the operating point parameters strongly depend on $\\lambda$\n",
        "may be impractical in the first place. The accuracy of\n",
        "the $\\lambda$-model as far as absolute I-V values are \n",
        "concerned can only be approximate due to its empirical\n",
        "nature. For high accuracy analysis, much more complex\n",
        "models (such as the one described in\n",
        "[Reference 7](#Reference7)) must be used, carefully calibrated with\n",
        "physical measurements and subsequently evaluated\n",
        "in computer simulations. For the purpose of developing\n",
        "an introductory feel for circuits, however, the\n",
        "$\\lambda$-model is still the most appropriate, mainly due its\n",
        "simplicity.\n",
        "\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;[Table 2-3](#) summarizes the technology parameters\n",
        "introduced in this chapter.\n",
        "\n",
        ":::: {.table .striped .hover}\n",
        "Table: Standard technology parameters for the $\\lambda$-model. {#tbl-lambda-model}\n",
        "\n",
        "+------------------------+:----------------------:+:----------------------:+\n",
        "| **Parameter**          | **n-channel MOSFET**   | **p-channel MOSFET**   |\n",
        "+========================+:======================:+:======================:+\n",
        "| Threshold voltage      | $V_{Tn}$ = 0.5V        | $V_{Tp}$ = -0.5V       |\n",
        "+------------------------+------------------------+------------------------+\n",
        "| Transconductance       | $μ_nC_{ox}= 50μA/V^2$  |$μ_pC_{ox}= 25μA/V^2$   |\n",
        "|    parameter           |                        |                        |\n",
        "+------------------------+------------------------+------------------------+\n",
        "|Chanel length modulation|$\\lambda_n =0.1V^{-1}/L$|$\\lambda_p =0.1V^{-1}/L$|\n",
        "| parameter              |(L in $\\mu$ m)          |(L in $\\mu$ m)          |\n",
        "+------------------------+------------------------+------------------------+\n",
        "::::\n",
        "\n",
        "<!--: **Table 2-3**: Standard technology parameters for the $\\lambda$-model.-->\n",
        "\n",
        "\n",
        "\n",
        "## Two-Port Model for the Common-Source Voltage Amplifier\n",
        "\n",
        "The circuit shown in @fig-2.24 corresponds to a\n",
        "transconductance amplifier model (with voltage output)\n",
        "since we modeled the MOSFET as a voltage\n",
        "controlled current source, which is in line with its\n",
        "physical behavior in the saturation region. Alternatively,\n",
        "and since the circuit is meant to function as a\n",
        "voltage amplifier, we can equivalently model it using\n",
        "a native voltage amplifier two-port as shown in\n",
        "@fig-2.25. The reader can prove that for this model\n",
        "the open-circuit voltage gain is given by $A_v$ =\n",
        "$–g_m R_{out}$, where $R_{out}$ corresponds to the parallel \n",
        "connection of $R_D$ and $r_o$. The native voltage amplifier\n",
        "model is sometimes preferred since it more directly\n",
        "expresses the intended function we assumed in this\n",
        "chapter. However, as we shall see in [Chapter 3](#Chapter3), the\n",
        "voltage amplifier two-port is no longer a convenient\n",
        "representation for the CS voltage amplifier when\n",
        "device capacitances are included.\n",
        "\n",
        "![Equivalent voltage amplifier-based model for the common-source amplifier circuit @fig-2.24.](images/png/figure2.25.png){#fig-2.25 width=100%}\n",
        "\n",
        "\n",
        "@fig-2.26 shows the small-signal commonsource\n",
        "voltage amplifier model together with an\n",
        "input transducer and load resistance. Since the input\n",
        "resistance of the CS amplifier is infinite, no resistive\n",
        "division takes place at the input port and $v_{in} = v_s$.\n",
        "Thus, the overall voltage gain is computed as\n",
        "\n",
        "$$\n",
        "A'_v = \\frac{v_{out}}{v_s} = A_v \\cdot \\left(\\frac{R_L}{R_L + R_{out}}\\right)\n",
        "$${#eq-2.53}\n",
        "\n",
        "\n",
        "![Common-source amplifier model with transducer and load resistance.](images/png/figure2.26.png){#fig-2.26 width=100%}\n",
        "\n",
        "\n",
        "&nbsp;&nbsp;&nbsp; The same expression can be found from the \n",
        "circuit of @fig-2.24 with $R_L$ included across the \n",
        "output port. The reader is invited to prove this.\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;As a final note, we should emphasize that adding\n",
        "a load resistance may have implications on the bias\n",
        "point of the circuit. For example, if the load resistor\n",
        "carries a DC current, this current will affect the \n",
        "quiescent point output voltage of the amplifier. In this\n",
        "case, the load resistance must also be connected to\n",
        "the circuit in the operating point analysis where the\n",
        "small-signal parameters such as $r_o$ are computed.\n",
        "[Problem 2-17](#prob-2-17) looks at an example.\n",
        "\n",
        "\n",
        "## Summary \n",
        "\n",
        "In this chapter we reviewed the basic I-V \n",
        "characteristics of a MOSFET and employed this device to\n",
        "construct examples of common-source voltage\n",
        "amplifiers. In deriving a model for the MOSFET, we\n",
        "concentrated on first-order effects that define the\n",
        "transistor’s operation. The nonlinear nature of even\n",
        "the simplest device model dictates the use of\n",
        "small-signal approximations to enable analyses with\n",
        "manageable complexity. The presented methodology\n",
        "begins by finding the operating point of the \n",
        "transistor. Next, the small-signal equivalent is used to\n",
        "construct a linear small-signal model for further\n",
        "analysis.\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;We studied the basic common-source voltage\n",
        "amplifier with drain resistance and found that the\n",
        "voltage gain in this circuit is directly proportional to\n",
        "the voltage drop across the resistor, which imposes\n",
        "practical limits on the achievable voltage gain. A\n",
        "modified circuit based on an auxiliary bias current\n",
        "source was then analyzed as an alternative and used\n",
        "as a motivation to incorporate the effect of channel\n",
        "length modulation using the $\\lambda$-model.\n",
        "\n",
        "&nbsp;&nbsp;&nbsp;The most important concepts that you should\n",
        "have mastered are:\n",
        "\n",
        " *  Determining MOSFET drain currents in all\n",
        "regions of operation; determining the regions of\n",
        "operation based on the transistor’s terminal voltages.\n",
        "\n",
        " * Constructing transfer characteristics and load line\n",
        "plots for common-source stages for various drain\n",
        "bias configurations.\n",
        "\n",
        " * Calculating the operating point of a CS stage and\n",
        "the MOSFET’s small-signal parameters $g_m$ and $r_o$.\n",
        "\n",
        " * Drawing the small-signal model of a CS stage and\n",
        "calculating its voltage gain.\n",
        "\n",
        "## References\n",
        "\n",
        "1. R. F. Pierret, *Semiconductor Device Fundamentals*, Prentice Hall, 1995.\n",
        "\n",
        "2. P. R. Gray, P. J. Hurst, S. H. Lewis, and R. G.\n",
        "Meyer, *Analysis and Design of Analog Integrated Circuits*, 5th Edition, Wiley, 2008.\n",
        "\n",
        "3. D. O. Pederson and K. Mayaram, *Analog Integrated Circuits for Communication: Principles,\n",
        "Simulation and Design*, 2nd Edition, Springer,\n",
        "2008.\n",
        "\n",
        "4. Y. Tsividis, *Operation and Modeling of the MOS Transistor*, 2nd Edition, McGraw-Hill, New York, 1999.\n",
        "\n",
        "5. P. G. A. Jespers, *The $g_m/I_D$ Methodology, a Sizing Tool for Low-Voltage Analog CMOS Circuits*, Springer, 2010.\n",
        "\n",
        "6. M. J. M. Pelgrom, et al., *“Matching properties of\n",
        "MOS transistors,”* IEEE J. of Solid-State Circuits,\n",
        " pp. 1433-1439, May 1989.\n",
        "\n",
        "7. G. Gildenblat, et al., “PSP: An Advanced \n",
        "Surface-Potential-Based MOSFET Model for \n",
        "Circuit Simulation,” *IEEE Trans. Electron Devices,*\n",
        "pp. 1979-1993, Sept. 2006.\n",
        "\n",
        "## Problems\n",
        "\n",
        "\n",
        "Unless otherwise stated, use the standard model\n",
        "parameters specified in @tbl-lambda-model\n",
        "for the problems\n",
        "given below. Consider only first-order MOSFET\n",
        "behavior and include channel length modulation (as\n",
        "well as any other second-order effects) only where\n",
        "explicitly stated.\n",
        "\n",
        "\n",
        "**P2.1** An n-channel transistor biased in saturation\n",
        "with $W/L = 10$ carries a drain current of 200 $\\mu$A when\n",
        "$V_{GS}$ = 1.5 $V$ is applied. With $V_{GS}$ = 1 $V$, the current\n",
        "drops to 50 $\\mu$A. Determine $V_{Tn}$ and $\\mu C_{ox}$ of this \n",
        "transistor.\n",
        "\n",
        "**P2.2** Show that two MOS transistors in series with\n",
        "channel lengths $L_1$ and $L_2$ and identical channel\n",
        "widths can be modeled as one equivalent MOS \n",
        "transistor with length $L_1 + L_2$ (see @fig-p2-2).\n",
        "Assume that $M_1$ and $M_2$ have identical parameters except for\n",
        "their channel lengths. Hint: there are (at least) two\n",
        "ways to solve this problem. One is through extensive\n",
        "algebra; the other is though physical insight and\n",
        "arguments based on the MOSFET cross-section.\n",
        "\n",
        "![](images/png/figure-p2-2.png){#fig-p2-2 width=100%}\n",
        "\n",
        "**P2.3** Derive an analytical expression for the input\n",
        "voltage that corresponds to the transition point\n",
        "(point $C$) between the saturation and triode regions\n",
        "in @fig-2.7(b).\n",
        "\n",
        "**P2.4** In [Example 2-4](#example-2-4), we calculated \n",
        "the most negative input excursion that the circuit in \n",
        "@fig-2.9 can\n",
        "handle before the output is clipped to the supply\n",
        "voltage. In this problem, calculate the most positive\n",
        "input excursion that can be applied before the \n",
        "MOSFET enters the triode region. Assume the same\n",
        "parameters as in [Example 2-4](#example-2-4): $V_{DD}$ = 5 $V$,\n",
        "$R_D$ = 10 $kΩ$, W/L = $10$, and $V_{IN}$ is adjusted to 1.5 $V$,\n",
        "so that $V_{OUT}$ = 2.5 $V$ at the circuit’s operating point.\n",
        "\n",
        "\n",
        "**P2.5** For the circuit shown in @fig-p2-5, sketch\n",
        "$v_{OUT}$ as a function of $v_{IN}$. Assume that $v_{IN}$ varies\n",
        "from 0 to 5 $V$. There is no need to carry out any\n",
        "detailed calculations; simply draw a qualitative\n",
        "graph and mark pertinent asymptotes and breakpoints\n",
        "(such as changes in the MOSFETs region of\n",
        "operation).\n",
        "\n",
        "\n",
        "![](images/png/figure-p2-5.png){#fig-p2-5 width=50%}\n",
        "\n",
        "\n",
        "\n",
        "**P2.6** Derive the small-signal voltage gain given by\n",
        "@eq-2.27 through direct differentiation of\n",
        "@eq-2.17 [i.e., apply @eq-2.25].\n",
        "\n",
        "**P2.7** A field effect transistor built using a new \n",
        "(fictitious) material behaves “almost” exactly like a \n",
        "conventional MOSFET in silicon technology. The large\n",
        "signal I-V characteristic (in the saturation region) is\n",
        "given by\n",
        "\n",
        "$$\n",
        "I_D = \\frac{1}{2} \\mu_n C_{ox} \\frac{W}{L} ({V_{GS}} - V_{Tn})^{2.5} \n",
        "$$\n",
        "\n",
        "Assuming that $\\mu C_{ox} W/L$ =  100 $\\mu A$/$V^{2.5}$ and $I_D$ = 1 $\\mu$A,\n",
        "\n",
        "compute the transconductance of the device.\n",
        "\n",
        "**P2.8** The ratio of the small-signal drain current\n",
        "excursion and quiescent point drain current ($i_d/I_D$) is\n",
        "sometimes called the drain modulation index. Show that\n",
        "for a MOSFET, $i_d/I_D$ is twice as large as the relative\n",
        "excursion in the gate-source voltage, $v_{gs}/V_{OV}$.\n",
        "\n",
        "**[P2.9]{#problem-2-9}** Consider the CS amplifier shown @fig-2.9(a).\n",
        "Calculate the small-signal voltage gain assuming\n",
        "$V_{IN}$ = 1.5 $V$, W/L = 20, $R_D$ = 5 $kΩ$, and $V_{DD}$ = 5 $V$.\n",
        "Be sure to check the device's region of operation.\n",
        "\n",
        "**P2.10** Consider the p-channel CS amplifier shown in\n",
        "@fig-2.14(a). Assuming $W/L$ = 20, $R_D$ = 5 $kΩ$, and\n",
        "$V_{DD}$ = 5 $V$, calculate the required quiescent point\n",
        "input voltage so that $V_{OUT}$ = 2.5 $V$. What is the\n",
        "small-signal gain of the circuit?\n",
        "\n",
        "**P2.11** Repeat [Problem 2.9](#problem-2-9) with $R_D$ = 10 $kΩ$. With\n",
        "this value, the MOSFET operates in the triode\n",
        "region. Compute the small-signal voltage gain by\n",
        "writing the large-signal relationship between the\n",
        "input and output for the triode region and \n",
        "subsequent differentiation at the operating point.\n",
        "\n",
        "**P2.12** Consider the cascade connection of two CS\n",
        "amplifiers as shown in @fig-p2-12.\n",
        "\n",
        "(a) Draw the small-signal equivalent model for this\n",
        "circuit.\n",
        "\n",
        "(b) Calculate the small-signal voltage gains $v_{out1}/v_{in}$  and\n",
        "  $v_{out2}/v_{in}$. Assume that\n",
        "$V_{IN} = V_{DD} / 2$  and that the device sizes\n",
        "are chosen such that the bias points of nodes\n",
        " $v_{out1}$  and  $v_{out2}$  are also exactly at\n",
        "  $V_{DD} / 2$ .\n",
        "\n",
        "\n",
        "![](images/png/figure-p2-12.png){#fig-p2-12 width=50%}\n",
        "\n",
        "**P2.13** Repeat [Problem 2.9](#problem-2-9)\n",
        " and include the effect of channel length modulation \n",
        "in the small-signal voltage\n",
        "gain calculation. Neglect channel length modulation\n",
        "in the bias point calculation. Quantify the\n",
        "percent difference in the calculated small-signal\n",
        "voltage gain compared to [Problem 2.9](#problem-2-9). Assume that\n",
        "the channel length of the MOSFET is 2 $\\mu$m.\n",
        "\n",
        "\n",
        "**P2.14** For the p-channel common-source amplifier\n",
        "shown in @fig-2.14(a)\n",
        "\n",
        "(a) Given $W/L= 12$ $\\mu m$/2 $\\mu m$ and $R_D$ = 10 $kΩ$, \n",
        "calculate $V_{IN}$ such that $V_{OUT}$ is 2.5 $V$. $V_{DD}$ = $5V$.\n",
        "Neglect channel length modulation in this calculation.\n",
        "\n",
        "(b) What is the small-signal voltage gain,\n",
        "$A_v = v_{out} /v_{in}$ ? Include the effect of \n",
        "channel-length modulation in your calculation.\n",
        "\n",
        "(c) To increase the voltage gain, you increase $R_D$ to\n",
        "100 $kΩ$. Calculate the new small-signal voltage\n",
        "gain, $A_v$. You must re-bias the circuit so that\n",
        "$V_{OUT}$ = 2.5 $V$.\n",
        "\n",
        "(d) We could also try to increase the voltage gain of\n",
        "the initial circuit by increasing $W/L$ rather than\n",
        "$R_D$. Calculate the new $A_v$ if $W/L$= 120 $\\mu m$ /2 $\\mu m$\n",
        "and $R_D$ = 10 $kΩ$. Be sure to re-bias the circuit so\n",
        "that $V_{OUT}$ = 2.5 $V$.\n",
        "\n",
        "\n",
        "**P2.15** Calculate the small-signal gain of the intrinsic\n",
        "gain stage shown in @fig-2.22(a), assuming\n",
        "$W$= 10 $\\mu m$ and using the parameters given below. In\n",
        "each case, explicitly calculate the gate overdrive voltage\n",
        "($V_{OV}$), the transconductance ($g_m$) and the output\n",
        "resistance ($r_o$). Assume that the circuit is biased such\n",
        "that the MOSFET operates in the saturation region. \n",
        "Neglect $V_{DS}$ dependence in the calculation of  $r_o$ .\n",
        "\n",
        "(a) $I_D$ = 100 $\\mu$A, $L$ = 2 $\\mu$m\n",
        "\n",
        "(b) $I_D$ = 50 $\\mu$A, $L$ = 2 $\\mu$m\n",
        "\n",
        "(c) $I_D$ = 100 $\\mu$A, $L$ = 4 $\\mu$m\n",
        "\n",
        "**P2.16** Consider the CS amplifier of @fig-2.19(a)\n",
        "with the following parameters: $V_B$ = 2.5 $V$,\n",
        "$I_B = 500\\,\\mu\\text{A}, \\; W = 20\\,\\mu\\text{m}, \\; L = 1\\,\\mu\\text{m},$\n",
        "and $R_D$ = 5 $kΩ$ .\n",
        "\n",
        "(a) Calculate the exact value of $V_{IN}$ required such\n",
        "that $I_D = I_B$, and $V_{OUT} = V_B$. Include the effect\n",
        "of channel length modulation in your calculation.\n",
        "\n",
        "(b) Using the value of $V_{IN}$ found in part (a),\n",
        "re-compute $V_{OUT}$ for the two cases when $\\lambda$\n",
        "changes by +50% and -50%, respectively. Such\n",
        "discrepancies may be due to variations in the\n",
        "semiconductor process or simply due to uncertainty\n",
        "in the simplistic $\\lambda$-model.\n",
        "\n",
        "**[P2.17]{#prob-2-17}** Consider the CS amplifier shown in @fig-p2-17\n",
        "with the following parameters: $V_{DD}$ = 5 $V$,\n",
        "$V_{IN}$ = 1.8 $V$, W = 15 $\\mu m$, L = 1 $\\mu m$, $R_D$ = 5 $kΩ$, and\n",
        "$R_L$ = 10 $kΩ$.\n",
        "\n",
        "\n",
        "(a) Calculate the output quiescent point voltage\n",
        "and drain current of the circuit, taking the \n",
        "connected load resistance $R_L$ into account. Ignore\n",
        "channel-length modulation in this calculation.\n",
        "\n",
        "(b) Calculate $g_m$ and $r_o$ using the parameters from\n",
        "part (a). Take  $V_{DS}$ dependence into account.\n",
        "\n",
        "\n",
        "(c) Draw a two-port voltage amplifier model for\n",
        "the circuit and calculate the \n",
        "open-circuit voltage gain ($A_v$) and overall voltage gain \n",
        "($A'_v$) with the load resistor connected.\n",
        "\n",
        "(d) Repeat parts (a) and (b) without considering the\n",
        " connected $RL$ and recompute the two-port parameters of \n",
        " part (c). Summarize the observed differences.\n",
        "\n",
        "\n",
        "\n",
        "![](images/png/figure-p2-17.png){#fig-p2-17 width=50%}\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "</div>"
      ],
      "id": "aa3234f8"
    }
  ],
  "metadata": {
    "kernelspec": {
      "name": "python3",
      "language": "python",
      "display_name": "Python 3 (ipykernel)",
      "path": "C:\\Users\\bmurm\\AppData\\Local\\Packages\\PythonSoftwareFoundation.Python.3.11_qbz5n2kfra8p0\\LocalCache\\local-packages\\share\\jupyter\\kernels\\python3"
    }
  },
  "nbformat": 4,
  "nbformat_minor": 5
}